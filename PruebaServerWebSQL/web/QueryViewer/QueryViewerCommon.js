function IsQueryObjectPreview(){return void 0!=window.external&&void 0!=window.external.SendText}function IsDashboardEdit(){return"undefined"!==typeof UCDashboardForEditor}function UpdateQueryObjectPreview(a){for(var d=Object.keys(qv.collection)[0],d=qv.collection[d],a=JSON.parse(a),e=Object.keys(a),b=0;b<e.length;b++){var h=e[b];d[h]=a[h]}d.realShow()}
var HIGHCHARTS_COLOR_PREFIX="highcharts-color-",HIGHCHARTS_MAX_COLORS=36,HIGHCHARTS_CUSTOM_COLOR=[],qv={collection:{},fadeTimeouts:{}},QueryViewerVisible={Always:"Always",Yes:"Yes",No:"No",Never:"Never"},QueryViewerElementType={Axis:"Axis",Datum:"Datum"},QueryViewerAxisType={Rows:"Rows",Columns:"Columns",Pages:"Pages"},QueryViewerFilterType={ShowAllValues:"ShowAllValues",HideAllValues:"HideAllValues",ShowSomeValues:"ShowSomeValues"},QueryViewerAxisOrderType={None:"None",Ascending:"Ascending",Descending:"Descending",
Custom:"Custom"},QueryViewerExpandCollapseType={ExpandAllValues:"ExpandAllValues",CollapseAllValues:"CollapseAllValues",ExpandSomeValues:"ExpandSomeValues"},QueryViewerDataType={Integer:"integer",Real:"real",Character:"character",Boolean:"boolean",Date:"date",DateTime:"datetime",GUID:"guid"},QueryViewerAggregationType={Sum:"Sum",Average:"Average",Count:"Count",Max:"Max",Min:"Min"},QueryViewerOutputType={Card:"Card",Chart:"Chart",PivotTable:"PivotTable",Table:"Table",Map:"Map",Default:"Default"},QueryViewerMapType=
{Choropleth:"Choropleth",Bubble:"Bubble",Point:"Point"},QueryViewerRegion={Country:"Country",Continent:"Continent",World:"World"},QueryViewerContinent={SouthAmerica:"SouthAmerica",NorthAmerica:"NorthAmerica",Africa:"Africa",Asia:"Asia",Europe:"Europe",Oceania:"Oceania",Antarctica:"Antarctica"},QueryViewerMapLibrary={Highcharts:"Highcharts",ECharts:"ECharts"},QueryViewerChartType={Column:"Column",Column3D:"Column3D",StackedColumn:"StackedColumn",StackedColumn3D:"StackedColumn3D",StackedColumn100:"StackedColumn100",
Bar:"Bar",StackedBar:"StackedBar",StackedBar100:"StackedBar100",Area:"Area",StackedArea:"StackedArea",StackedArea100:"StackedArea100",SmoothArea:"SmoothArea",StepArea:"StepArea",Line:"Line",StackedLine:"StackedLine",StackedLine100:"StackedLine100",SmoothLine:"SmoothLine",StepLine:"StepLine",Pie:"Pie",Pie3D:"Pie3D",Doughnut:"Doughnut",Doughnut3D:"Doughnut3D",LinearGauge:"LinearGauge",CircularGauge:"CircularGauge",Radar:"Radar",FilledRadar:"FilledRadar",PolarArea:"PolarArea",Funnel:"Funnel",Pyramid:"Pyramid",
ColumnLine:"ColumnLine",Column3DLine:"Column3DLine",Timeline:"Timeline",SmoothTimeline:"SmoothTimeline",StepTimeline:"StepTimeline",Sparkline:"Sparkline"},QueryViewerConditionOperator={Equal:"EQ",LessThan:"LT",GreaterThan:"GT",LessOrEqual:"LE",GreaterOrEqual:"GE",NotEqual:"NE",Interval:"IN"},QueryViewerConditionOperatorSymbol={Equal:"=",LessThan:"<",GreaterThan:">",LessOrEqual:"≤",GreaterOrEqual:"≥",NotEqual:"<>",Interval:"-"},QueryViewerOrientation={Horizontal:"Horizontal",Vertical:"Vertical"},QueryViewerPlotSeries=
{InTheSameChart:"InTheSameChart",InSeparateCharts:"InSeparateCharts"},QueryViewerShowDataAs={Values:"Values",Percentages:"Percentages",ValuesAndPercentages:"ValuesAndPercentages"},QueryViewerSubtotals={Yes:"Yes",Hidden:"Hidden",No:"No"},QueryViewerTrendPeriod={SinceTheBeginning:"SinceTheBeginning",LastYear:"LastYear",LastSemester:"LastSemester",LastQuarter:"LastQuarter",LastMonth:"LastMonth",LastWeek:"LastWeek",LastDay:"LastDay",LastHour:"LastHour",LastMinute:"LastMinute",LastSecond:"LastSecond"},
QueryViewerXAxisLabels={Horizontally:"Horizontally",Rotated30:"Rotated30",Rotated45:"Rotated45",Rotated60:"Rotated60",Vertically:"Vertically"},QueryViewerAutoresizeType={Both:"Both",Vertical:"Vertical",Horizontal:"Horizontal"},QueryViewerTranslationType={NoTranslation:"None",Static:"Static",RunTime:"RunTime"};
qv.util={color:{getHtmlColor:function(a){return"string"==typeof a||"number"==typeof a?gx.color.toHex?-1==a?"":"#"+gx.color.toHex(a):"#"+gxToHex(a):void 0==a?"#000000":a.Html},parseCSSColor:function(a){return"rgb"==a.substring(0,3)?(a=a.replace("rgb","").replace("(","").replace(")","").split(","),this.getHtmlColor(gx.color.rgb(parseInt(a[0]),parseInt(a[1]),parseInt(a[2])))):a},convertValueToColor:function(a){a=-1==a.indexOf("#")?"#"+a:a;for(a=a.substring(1,a.length);6>a.length;)a="0"+a;return"#"+a},
IsHexaColor:function(a){return 6===a.length&&!isNaN(parseInt(a,16))},lightenDarkenColor:function(a,d){var e=!1;"#"==a[0]&&(a=a.slice(1),e=!0);var b=parseInt(a,16),h=(b>>16)+d;255<h?h=255:0>h&&(h=0);var o=(b>>8&255)+d;255<o?o=255:0>o&&(o=0);b=(b&255)+d;255<b?b=255:0>b&&(b=0);return(e?"#":"")+(b|o<<8|h<<16).toString(16)}},css:function(){var a={};return{replaceCssClasses:function(d){for(;0<=(posIni=d.indexOf("gxpl_cssReplace("));){posFin=d.indexOf(")",posIni);className=d.substring(posIni+16,posFin);
var e=className;if(void 0!=a[e])style=a[e];else{for(var b=e,h=void 0,o=gx.theme+".css",m=!1,k=void 0,q=0;q<document.styleSheets.length;q++)if(null!=document.styleSheets[q].href&&0<=document.styleSheets[q].href.indexOf(o)){m=!0;h=document.styleSheets[q];break}m&&(h.cssRules?crossRules=h.cssRules:h.rules&&(crossRules=h.rules));h=Number.MAX_SAFE_INTEGER;for(q=0;q<crossRules.length;q++)o=crossRules[q],void 0!=o.selectorText&&(0==o.selectorText.toLowerCase().indexOf("."+b.toLowerCase())&&o.selectorText.length<
h)&&(k=o.style,h=o.selectorText.length);styleObj=k;void 0!=styleObj?(b=styleObj,k="",""!=b.color&&(k+=(""==k?"":";")+"color:"+qv.util.color.parseCSSColor(b.color)),""!=b.backgroundColor&&(k+=(""==k?"":";")+"backgroundColor:"+qv.util.color.parseCSSColor(b.backgroundColor)),""!=b.borderStyle&&(k+=(""==k?"":";")+"borderStyle:"+b.borderStyle),""!=b.borderWidth&&(k+=(""==k?"":";")+"borderThickness:"+b.borderWidth.replace("pt","").replace("px","")),""!=b.borderColor&&(k+=(""==k?"":";")+"borderColor:"+qv.util.color.parseCSSColor(b.borderColor)),
""!=b.fontFamily&&(k+=(""==k?"":";")+"fontFamily:"+b.fontFamily.replace(/"/g,"").replace(/'/g,"")),""!=b.fontSize&&(k+=(""==k?"":";")+"fontSize:"+b.fontSize.replace("pt","").replace("px","")),""!=b.fontWeight&&(k+=(""==k?"":";")+"fontWeight:"+b.fontWeight),""!=b.fontStyle&&(k+=(""==k?"":";")+"fontStyle:"+b.fontStyle),""!=b.textDecoration&&(k+=(""==k?"":";")+"textDecoration:"+b.textDecoration),styleTransformed=k,style=a[e]=styleTransformed):style=""}toReplace=d.substring(posIni,posFin+1);d=d.replace(toReplace,
style)}return d},parseStyle:function(a){var e="";if(""!=a&&void 0!=a){if(0>a.indexOf(":"))return a;for(var a=a.split(";"),b=0;b<a.length;b++)var h=a[b].split(":"),o=h[0],e=e+((""==e?"":",")+'"'+("borderThickness"==o?"borderWidth":o)+'":"'+h[1]+("borderThickness"==o||"fontSize"==o?"px":"")+'"');return"{"+e+"}"}return"{}"}}}(),autorefresh:function(){return{UpdateLayoutSameGroup:function(a,d,e){function b(a,b){function d(a,f){for(var c=0;c<a.Metadata.Parameters.length;c++){var b=a.Metadata.Parameters[c];
if(b.IsCollection&&b.Name==f)return[c,b]}return[null,null]}function e(a,f){for(var c=null,b=0;b<a.Parameters.length;b++)if(a.Parameters[b].Name==f){c=a.Parameters[b];break}return c}function h(a,f){for(var c="",b="I"==f.Type||"R"==f.Type||"B"==f.Type?"":'"',o=0;o<a.Filter.Values.length;o++)c+=(""==c?"":",")+b+a.Filter.Values[o]+b;return"["+c+"]"}var c=[];a._parametersCloned||(a._parametersCloned=!0,a.Parameters=qv.util.cloneObject(a.Parameters));for(var f=qv.util.GetOrderedElementsKeys(a,b),g=a.GetMetadata(),
l=0;l<f.length;l++){var p=parseInt(f[l].substr(6,4));sourceElement=b[p];var v=d(a,sourceElement.Name),p=v[0],v=v[1],r=qv.util.GetElementInCollection(g,"Name",sourceElement.Name),x=null!=r,n=!x;x&&(qv.util.MergeFields(sourceElement,r),c.push(r));n&&null!=v&&(v=h(sourceElement,v),a.Object?(r=eval(a.Object),r[p+2]=v,a.Object=JSON.stringify(r)):(p=e(a,sourceElement.Name),null==p&&(p={},p.Name=sourceElement.Name,a.Parameters.push(p)),p.Value=v))}a.Axes=c}function h(a,d,k){b(a,d);a.RememberLayout=!1;a.AllowElementsOrderChange=
k;qv.util.autorefresh.SaveAxesAndParametersState(a);a.realShow()}if(void 0!=a.AutoRefreshGroup&&null!=a.AutoRefreshGroup&&""!=a.AutoRefreshGroup&&""!=qv.util.trim(a.AutoRefreshGroup))for(index in qv.util.autorefresh.DeleteAxesAndParametersState(a),qv.collection)qViewerOther=qv.collection[index],qv.services.IsObjectSet(qViewerOther)&&(qViewerOther.userControlId()!=a.userControlId()&&a.AutoRefreshGroup==qViewerOther.AutoRefreshGroup)&&(qViewerOther._isAutorefresh=!0,void 0!=qViewerOther.Metadata&&void 0!=
qViewerOther.Metadata.Parameters?h(qViewerOther,d,e):qViewerOther.getQueryParameters(function(a,b){var k=qv.util.dom.xmlDocument(a),k=qv.util.dom.getSingleElementByTagName(k,"gxpl_ParameterCollection");void 0==b.Metadata&&(b.Metadata={});b.Metadata.Parameters=[];for(var k=qv.util.dom.getMultipleElementsByTagName(k,"gxpl_Parameter"),q=0;q<k.length;q++){var s={};s.Name=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[q],"Name"));s.Type=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[q],
"Type"));s.IsCollection=gx.lang.gxBoolean(qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[q],"IsCollection")));b.Metadata.Parameters.push(s)}h(b,d,e)}))},LoadAxesAndParametersState:function(a){function d(a,b){for(var d=0;d<b.length;d++){var k=b[d],e;a:{e=a;for(var s=k.Name,c=0;c<e.length;c++)if(e[c].Name.toLowerCase()==s.toLowerCase()){e=e[c];break a}e=null}null!=e&&Object.assign(e,k)}return a}var e=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",
b=e+"Axes",e=qv.util.storage.getItem(e+"Parameters"),b=qv.util.storage.getItem(b);null!=e&&""!=e&&(a.Parameters=d(JSON.parse(e),a.Parameters),a.RememberLayout=!1);null!=b&&""!=b&&(a.Axes=d(JSON.parse(b),a.Axes),a.RememberLayout=!1)},SaveAxesAndParametersState:function(a){var d=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",e=d+"Axes";qv.util.storage.setItem(d+"Parameters",JSON.stringify(a.Parameters));qv.util.storage.setItem(e,JSON.stringify(a.Axes))},DeleteAxesAndParametersState:function(a){var a=
window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",d=a+"Axes";qv.util.storage.removeItem(a+"Parameters");qv.util.storage.removeItem(d)}}}(),dom:{getSingleElementByTagName:function(a,d){var e;e=this.getMultipleElementsByTagName(a,d);return 0<e.length?e[0]:null},getMultipleElementsByTagName:function(a,d){return!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?a.getElementsByTagName(d):a.selectNodes(d)},getBooleanAttribute:function(a,d,e){a=a.getAttribute(d);return null==
a?e:"true"==a.toLowerCase()},getCharacterAttribute:function(a,d,e){a=a.getAttribute(d);return null==a?e:a},getValueNode:function(a){return null==a||void 0==a?null:null!=a.firstChild&&void 0!=a.firstChild?a.firstChild.nodeValue:null},selectXPathNode:function(a,d){var e;a.evaluate?(e=a.evaluate(d,a,null,XPathResult.ANY_TYPE,null),e=e.iterateNext()):(e=a.selectNodes(d),e=0<e.length?e[0]:null);return e},xmlDocument:function(a){var d;!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?(parser=new DOMParser,
d=parser.parseFromString(a,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a));return d},getEmptyContainer:function(a){for(a=a.getContainerControl();a.firstChild;)a.removeChild(a.firstChild);return a},setStyle:function(a,d){for(key in d)a.style[key]=d[key]},createText:function(a,d){var e=document.createTextNode(d);a.appendChild(e);return e},createElement:function(a,d,e,b,h,o,m){d=document.createElement(d);""!=e&&(d.id=e);""!=b&&(d.className=b);qv.util.dom.setStyle(d,
h);"function"==typeof o&&(d.onclick=o);""!=m&&qv.util.dom.createText(d,m);null!=a&&a.appendChild(d);return d},createTable:function(a,d,e){a=qv.util.dom.createElement(a,"TABLE","",d,e,null,"");d=document.createElement("TBODY");a.appendChild(d);return d},createRow:function(a){return qv.util.dom.createElement(a,"TR","","",{},null,"")},createCell:function(a,d,e,b,h){a=qv.util.dom.createElement(a,"TD","","",b,null,h);1!=d&&(a.colSpan=d);""!=e&&(a.align=e);return a},createSpan:function(a,d,e,b,h,o,m){a=
qv.util.dom.createElement(a,"SPAN",d,e,h,o,m);""!=b&&(a.title=b);return a},createDiv:function(a,d,e,b,h,o){a=qv.util.dom.createElement(a,"DIV",d,e,h,null,o);""!=b&&(a.title=b);return a},createAnchor:function(a,d,e,b){return qv.util.dom.createElement(a,"A",d,"",e,null,b)},createInput:function(a,d,e,b){a=qv.util.dom.createElement(a,"INPUT",d,"",b,null,"");""!=e&&(a.type=e);return a},createSelect:function(a,d){return qv.util.dom.createElement(a,"SELECT",d,"",{},null,"")},createOption:function(a,d,e,
b){a=qv.util.dom.createElement(a,"OPTION","","",{},null,b);""!=d&&(a.value=d);e&&(a.selected=!0);return a},createIcon:function(a,d,e,b){a=qv.util.dom.createElement(a,"I","","material-icons",e,null,b);""!=d&&(a.title=d);return a}},storage:function(){function a(a,e,b){if(b){var h=new Date;h.setTime(h.getTime()+864E5*b);b="; expires="+h.toGMTString()}else b="";document.cookie=a+"="+e+b+"; path=/"}return{setItem:function(d,e){localStorage?localStorage.setItem(d,e):a(d,e,365)},getItem:function(a){if(localStorage)return localStorage.getItem(a);
a:{for(var a=a+"=",e=document.cookie.split(";"),b=0;b<e.length;b++){for(var h=e[b];" "==h.charAt(0);)h=h.substring(1,h.length);if(0==h.indexOf(a)){a=h.substring(a.length,h.length);break a}}a=null}return a},removeItem:function(d){localStorage?localStorage.removeItem(d):a(d,"",-1)}}}(),ExecuteTracker:function(a,d){for(var e=[],b=0;b<gx.fx.ctx.trackers.length;b++)gx.fx.ctx.trackers[b].types[0]==a&&(e[e.length]=gx.fx.ctx.trackers[b]);for(b=0;b<e.length;b++){var h=gx.O;gx.O=e[b].obj;var o=gx.csv.cmpCtx;
gx.csv.cmpCtx=e[b].obj.CmpContext;gx.evt.setProcessing(!1);e[b].hdl.call(e[b].obj,null,null,d);gx.O=h;gx.csv.cmpCtx=o}},satisfyStyle:function(a,d){switch(d.Operator){case QueryViewerConditionOperator.Equal:return a==d.Value1;case QueryViewerConditionOperator.GreaterThan:return a>d.Value1;case QueryViewerConditionOperator.LessThan:return a<d.Value1;case QueryViewerConditionOperator.GreaterOrEqual:return a>=d.Value1;case QueryViewerConditionOperator.LessOrEqual:return a<=d.Value1;case QueryViewerConditionOperator.NotEqual:return a!=
d.Value1;case QueryViewerConditionOperator.Interval:return a>=d.Value1&&a<=d.Value2}},isGeneXusPreview:function(){return IsQueryObjectPreview()},getGenerator:function(){return gx.gen.isDotNet()?"C#":gx.gen.isJava()?"Java":""},getErrorFromText:function(a){return'<Result OK="True"></Result>'==a?"":a.replace('<Result OK="False"><Dsc>',"").replace("</Dsc></Result>","")},trim:function(a){return"string"!=typeof a?null:a.replace(/^[\s]+/,"").replace(/[\s]+$/,"").replace(/[\s]{2,}/," ")},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.slice(1)},decapitalize:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},dateToString:function(a,d){var e=a.getStringWithFmt("Y4MD").replace(/\//g,"-");d&&(a.TimeFmt=24,e+=" "+a.getTimeString(!0,!0));return e},cloneObject:function(a){return JSON.parse(JSON.stringify(a))},endsWith:function(a,d){return a.substr(a.length-d.length,d.length)==d},startsWith:function(a,d){return a.substr(0,d.length)==d},formatNumber:function(a,d,e,b){a=gx.num.formatNumber(a,d,e,0,!0,!1);if(b&&(0<=a.indexOf(".")||
0<=a.indexOf(","))){for(;qv.util.endsWith(a,"0");)a=a.slice(0,-1);if(qv.util.endsWith(a,".")||qv.util.endsWith(a,","))a=a.slice(0,-1)}return a},formatDateTime:function(a,d,e,b,h,o,m){a=new gx.date.gxdate(a,"Y4MD");e=a.getStringWithFmt(e);d==QueryViewerDataType.DateTime&&(a.TimeFmt=24,e+=" "+a.getTimeString(h,o,b,m));return e},seconsdToText:function(a){return 60>a?qv.util.formatNumber(Math.round(a),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerSeconds")):3600>a?qv.util.formatNumber(Math.round(a/
60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMinutes")):86400>a?qv.util.formatNumber(Math.round(a/60/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerHours")):2630016>a?qv.util.formatNumber(Math.round(a/60/60/24),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerDays")):31557600>a?qv.util.formatNumber(Math.round(a/60/60/24/30.44),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMonths")):
qv.util.formatNumber(Math.round(a/60/60/24/365.25),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerYears"))},ParseNumericPicture:function(a,d){var e,b,h="",o="";if(""==d)e=a==QueryViewerDataType.Integer?0:2,b=!1;else{0>d.indexOf(".")&&0>d.indexOf(",")?(e=0,b=!1):0<=d.indexOf(".")&&0>d.indexOf(",")?(e=a==QueryViewerDataType.Integer?0:d.length-d.indexOf(".")-1,b=!1):(e=0>d.indexOf(".")&&0<=d.indexOf(",")?0:a==QueryViewerDataType.Integer?0:d.length-d.indexOf(".")-1,b=!0);
for(var m=1,k=0;k<d.length;k++){var q=d.substr(k,1);if(("."==q||","==q||"9"==q||"Z"==q)&&1==m)m=2;"."!=q&&(","!=q&&"9"!=q&&"Z"!=q)&&2==m&&(m=3);switch(m){case 1:h+=q;break;case 3:o+=q}}}return{DecimalPrecision:e,UseThousandsSeparator:b,Prefix:h,Suffix:o}},ParseDateTimePicture:function(a,d){var e=gx.dateFormat,b=a==QueryViewerDataType.DateTime,h=a==QueryViewerDataType.DateTime,o=a==QueryViewerDataType.DateTime,m=a==QueryViewerDataType.DateTime;""!=d&&(0<=d.indexOf("9999")&&0>e.indexOf("Y4")?e=e.replace("Y",
"Y4"):0>d.indexOf("9999")&&0<=e.indexOf("Y4")&&(e=e.replace("Y4","Y")),a==QueryViewerDataType.DateTime&&(b=d.indexOf(" "),0<=b?(m=d.substr(b+1,d.length-b),b=2<=m.length,h=5<=m.length,o=8<=m.length,m=12==m.length):m=o=h=b=!1));return{DateFormat:e,IncludeHours:b,IncludeMinutes:h,IncludeSeconds:o,IncludeMilliseconds:m}},evaluate:function(a,d,e){for(var b=1;b<=e.length;b++)a=a.replace(d+b.toString(),e[b-1]);return eval(a)},aggregate:function(a,d,e){var a=a||QueryViewerAggregationType.Sum,b=null,h=null,
o=null,m=null;switch(a){case QueryViewerAggregationType.Sum:for(a=0;a<d.length;a++)null!=d[a]&&(b+=d[a]);return b;case QueryViewerAggregationType.Average:for(a=0;a<d.length;a++)null!=d[a]&&(b+=d[a],h+=e[a]);return null!=b?b/h:null;case QueryViewerAggregationType.Count:for(a=0;a<e.length;a++)h+=e[a];return h;case QueryViewerAggregationType.Max:for(a=0;a<d.length;a++)m=null==m?d[a]:d[a]>m?d[a]:m;return m;case QueryViewerAggregationType.Min:for(a=0;a<d.length;a++)o=null==o?d[a]:d[a]<o?d[a]:o;return o}},
anyError:function(a){return 0==a.indexOf('<Result OK="False"><Dsc>')},showActivityIndicator:function(a){var d='qv.util.showActivityIndicatorMain("'+a.getContainerControl().id+'");',a=a.userControlId();qv.fadeTimeouts[a]&&clearTimeout(qv.fadeTimeouts[a]);qv.fadeTimeouts[a]=setTimeout(d,500)},showActivityIndicatorMain:function(a){a=document.getElementById(a);gx.dom.addClass(a,"gx-qv-loading");for(var d=0;d<a.childNodes.length;d++)gx.dom.addClass(a.childNodes[d],"gx-qv-loading-children")},hideActivityIndicator:function(a){var d=
a.userControlId();qv.fadeTimeouts[d]&&(clearTimeout(qv.fadeTimeouts[d]),qv.fadeTimeouts[d]=void 0);a=a.getContainerControl();gx.dom.removeClass(a,"gx-qv-loading");for(d=0;d<a.childNodes.length;d++)gx.dom.removeClass(a.childNodes[d],"gx-qv-loading-children")},renderError:function(a,d){if(IsQueryObjectPreview()&&!IsDashboardEdit())window.external.SendText(a.ControlName,d);else{var e=qv.util.dom.getEmptyContainer(a);qv.util.dom.createDiv(e,"","gx-qv-centered-text","",{width:gx.dom.addUnits(a.Width),
height:gx.dom.addUnits(a.Height),borderColor:"silver",borderWidth:"thin",borderStyle:"solid"},gx.getMessage("GXPL_QViewerError")+": "+d);a._ControlRenderedTo=void 0;qv.util.hideActivityIndicator(a)}},GetDesigntimeMetadata:function(a){for(var d=[],e=0;e<a.Metadata.Axes.length;e++){var b=a.Metadata.Axes[e];if(!b.IsComponent){var h={};h.Name=b.Name;h.Title=b.Title;h.DataField=b.DataField;h.Visible=b.Visible;h.Type=QueryViewerElementType.Axis;h.Axis=b.Axis;h.Filter=b.Filter;h.ExpandCollapse=b.ExpandCollapse;
h.AxisOrder=b.Order;h.Format={};h.Format.Subtotals=b.Subtotals;h.Format.Picture=b.Picture;h.Format.CanDragToPages=b.CanDragToPages;h.Format.Style=b.Style;0<b.ValuesStyles.length&&(h.Format.ValuesStyles=b.ValuesStyles);h.Actions={};h.Actions.RaiseItemClick=b.RaiseItemClick;d.push(h)}}for(e=0;e<a.Metadata.Data.length;e++)b=a.Metadata.Data[e],b.IsComponent||(h={},h.Name=b.Name,h.Title=b.Title,h.DataField=b.DataField,h.Visible=b.Visible,h.Type=QueryViewerElementType.Datum,h.Axis="",h.Aggregation=b.Aggregation,
h.Format={},h.Format.Picture=b.Picture,h.Format.Style=b.Style,h.Format.TargetValue=b.TargetValue,h.Format.MaximumValue=h.Format.TargetValue,0<b.ConditionalStyles.length&&(h.Format.ConditionalStyles=b.ConditionalStyles),h.Actions={},h.Actions.RaiseItemClick=b.RaiseItemClick,d.push(h));return d},MergeFields:function(a,d){if(d.Visible!=QueryViewerVisible.Never&&(d.Visible=a.Hidden?QueryViewerVisible.No:QueryViewerVisible.Yes,d.Type==QueryViewerElementType.Axis)){d.Axis=a.Axis;if(a.Order)switch(d.AxisOrder.Type){case QueryViewerAxisOrderType.None:case QueryViewerAxisOrderType.Ascending:case QueryViewerAxisOrderType.Descending:d.AxisOrder.Type=
a.Order;break;case QueryViewerAxisOrderType.Custom:a.Order==QueryViewerAxisOrderType.Descending&&d.AxisOrder.Values.reverse()}d.Format.Subtotals!=QueryViewerSubtotals.No&&void 0!=a.Subtotals&&(d.Format.Subtotals=a.Subtotals==QueryViewerSubtotals.Yes?QueryViewerSubtotals.Yes:QueryViewerSubtotals.Hidden);a.Filter&&(d.Filter=a.Filter);a.ExpandCollapse&&(d.ExpandCollapse=a.ExpandCollapse)}},GetOrderedElementsKeys:function(a,d){function e(a,b,c){return Array(b-(""+a).length+1).join(c||"0")+a}for(var b=
[],h=0;h<d.length;h++){var o=d[h],m=a.RealType==QueryViewerOutputType.Table?"0":o.Type==QueryViewerElementType.Axis?"1":"2";if(null!=o.Position){var k;if(a.RealType==QueryViewerOutputType.PivotTable)if(o.Type==QueryViewerElementType.Axis)switch(o.Axis){case QueryViewerAxisType.Columns:k="B";break;case QueryViewerAxisType.Pages:k="C";break;default:k="A"}else k="D";else k="A";m+=k+e(o.Position,4,"0")+e(h,4,"0")}else m+="Z"+e(h,4,"0")+e(h,4,"0");b.push(m)}b.sort();return b},GetContainerControlClass:function(a){return""!=
a.Class?a.Class+"-"+a.RealType.toLowerCase():""},GetContainerControlClasses:function(a){var d=qv.util.GetContainerControlClass(a),e;switch(a.RealType){case QueryViewerOutputType.Card:e="qv-card";break;case QueryViewerOutputType.Chart:e="qv-chart";break;case QueryViewerOutputType.PivotTable:e="qv-pivottable";break;case QueryViewerOutputType.Table:e="qv-table";break;case QueryViewerOutputType.Map:e="qv-map"}""!=d&&(e+=" "+d);return e},SetUserControlClass:function(a,d){a.getContainerControl().className=
"gx_usercontrol "+d},GetElementInCollection:function(a,d,e){for(var b=0;b<a.length;b++){var h=a[b];if(h[d]==e)return h}return null},IsInteger:function(a){return Number.isInteger?Number.isInteger(a):"number"===typeof a&&isFinite(a)&&Math.floor(a)===a},ApplyPicture:function(a,d,e,b){switch(e){case QueryViewerDataType.Integer:case QueryViewerDataType.Real:return qv.util.formatNumber(a,b.DecimalPrecision,d,!1);case QueryViewerDataType.Boolean:case QueryViewerDataType.Character:case QueryViewerDataType.GUID:return qv.util.trim(a);
case QueryViewerDataType.Date:case QueryViewerDataType.DateTime:return qv.util.formatDateTime(a,e,b.DateFormat,b.IncludeHours,b.IncludeMinutes,b.IncludeSeconds,b.IncludeMilliseconds)}},GetPictureProperties:function(a,d){return a==QueryViewerDataType.Integer||a==QueryViewerDataType.Real?qv.util.ParseNumericPicture(a,d):a==QueryViewerDataType.Date||a==QueryViewerDataType.DateTime?qv.util.ParseDateTimePicture(a,d):null},GetAxisByDataField:function(a,d){for(var e=0;e<a.Metadata.Axes.length;e++)if(a.Metadata.Axes[e].DataField==
d)return a.Metadata.Axes[e]},GetThemeStyleSheet:function(a){a._themeStyleSheet||(a._themeStyleSheet=qv.util.GetStyleSheet(gx.theme+".css"));return a._themeStyleSheet},GetNullColor:function(){return qv.util.GetColorObject("")},GetColorObject:function(a){return{IsDefault:!1,Color:a,ColorIndex:"-1"}},IsNullColor:function(a){return a.IsDefault?0>a.ColorIndex:""==a.Color},GetQueryViewerStyleSheet:function(a){a._queryViewerStyleSheet||(a._queryViewerStyleSheet=qv.util.GetStyleSheet("QueryViewer.css"));
return a._queryViewerStyleSheet},GetStyleSheet:function(a){for(var d,e=0;e<document.styleSheets.length;e++)if(null!=document.styleSheets[e].href&&0<=document.styleSheets[e].href.indexOf(a)){d=document.styleSheets[e];break}return d},XAxisDataType:function(a){for(var d=0,e="",b=0;b<a.Metadata.Axes.length;b++){var h=a.Metadata.Axes[b];if(h.Visible==QueryViewerVisible.Yes||h.Visible==QueryViewerVisible.Always)d++,e=h.DataType}return 1==d?e:QueryViewerDataType.Character},ProcessDataAndMetadata:function(a){function d(a){for(var f=
0,c=0;c<a.length;c++)"F0"!=a[c].DataField&&f++;return f}function e(a){a.Chart.Categories={};a.Chart.Categories.DataFields=[];for(var f=0;f<a.Metadata.Axes.length;f++){var c=a.Metadata.Axes[f];if(c.Visible==QueryViewerVisible.Yes||c.Visible==QueryViewerVisible.Always)(a.RealType!=QueryViewerOutputType.Map||c.DataType==QueryViewerDataType.Character)&&a.Chart.Categories.DataFields.push(c.DataField)}a.Chart.Series={};a.Chart.Series.DataFields=[];c=d(a.Metadata.Data);for(f=0;f<a.Metadata.Data.length;f++){var b=
a.Metadata.Data[f];(1==c?b.Visible==QueryViewerVisible.Yes||b.Visible==QueryViewerVisible.Always:b.Visible!=QueryViewerVisible.Never)&&a.Chart.Series.DataFields.push(b.DataField)}}function b(a){for(var f={},c=0;c<a.Metadata.Axes.length;c++){var b=a.Metadata.Axes[c],o=qv.util.GetPictureProperties(b.DataType,b.Picture);f[b.DataField]={Picture:b.Picture,DataType:b.DataType,PictureProperties:o,Filter:b.Filter}}return f}function h(a,f){function c(a,f,b){function g(a){for(var f=!1,c=0;c<a.length;c++)if(o(a[c].StyleOrClass,
!1)[0]){f=!0;break}return f}var l;if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&""!=a.Chart.colorAxis||a.MapType==QueryViewerMapType.Bubble&&""!=a.Chart.colorAxis||a.MapType==QueryViewerMapType.Point&&""!=a.Chart.colorAxis))l=!1;else if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&0==a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Bubble&&0==a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Point&&
0==a.Chart.colorAxis.dataClasses.length))l=!0;a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsSingleSerieChart(a)||a.RealChartType==QueryViewerChartType.PolarArea&&1==a.Chart.Series.DataFields.length)?l=!0:a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsAreaChart(a)||qv.chart.IsLineChart(a)||a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar)?l=!1:a.RealType==QueryViewerOutputType.Chart&&1<a.Chart.Series.DataFields.length&&!qv.chart.IsSplittedChart(a)?
l=!1:(a=g(f.ConditionalStyles),f=!1,null!=b&&(f=g(b.ValuesStyles)),l=a||f);return l}for(var b={},g=d(a.Metadata.Data),l=0;l<a.Metadata.Data.length;l++){var k=a.Metadata.Data[l];if(1==g?k.Visible==QueryViewerVisible.Yes||k.Visible==QueryViewerVisible.Always:k.Visible!=QueryViewerVisible.Never){var e=c(a,k,f);b[k.DataField]={Datum:k,Multicolored:e}}}return b}function o(a,f){var c="",b=!1,o=f?"backgroundcolor":"color";if(""!=a){for(var g=a.split(";"),l=0;l<g.length;l++){var d=g[l].split(":");if(2==d.length){var k=
d[1];if(d[0].toLowerCase()==o){c=k;b=""!=k;break}}}b&&"#"==c.substr(0,1)&&(c=c.replace("#",""))}return[b,c]}function m(a,f,c,b,g,l,d){function k(a,f){for(var c=[!1,""],b=0;b<a.ValuesStyles.length;b++){var g=a.ValuesStyles[b];if(g.Value==f){c=o(g.StyleOrClass,!1);break}}return c}function e(a,f){for(var c=[!1,""],b=!1,g=0;g<a.ConditionalStyles.length;g++){var l=a.ConditionalStyles[g];if(b=qv.util.satisfyStyle(f,l)){c=o(l.StyleOrClass,!1);break}}return c}var n,h=-1,m=!1;if(a){if(a=!1,null!=c&&(c=k(c,
l),a=c[0],n=c[1]),!a)c=e(f,d),a=c[0],n=c[1],a||(h=g%HIGHCHARTS_MAX_COLORS,m=!0)}else c=o(f.Style,!1),a=c[0],n=c[1],a||(h=b%HIGHCHARTS_MAX_COLORS,m=!0);return{IsDefault:m,Color:n,ColorIndex:h}}function k(a,f,c,b){for(var g="",o="",l=0;l<a.Chart.Categories.DataFields.length;l++){var d=a.Chart.Categories.DataFields[l],k;void 0!=f[d]?(k=qv.util.trim(f[d]),d=qv.util.ApplyPicture(k,b[d].Picture,b[d].DataType,b[d].PictureProperties)):d=k=a.Metadata.TextForNullValues;g+=(""==g?"":", ")+k;o+=(""==o?"":", ")+
d}f=[g,o];b={};b.Value=f[0];b.ValueWithPicture=f[1];a.Chart.Categories.Values.push(b);if(0==c)a.Chart.Categories.MinValue=b.Value,a.Chart.Categories.MaxValue=b.Value;else if(b.Value>a.Chart.Categories.MaxValue&&(a.Chart.Categories.MaxValue=b.Value),b.Value<a.Chart.Categories.MinValue)a.Chart.Categories.MinValue=b.Value}function q(a,f,c,b,g){for(var o=0;o<a.Chart.Series.DataFields.length;o++){var l=a.Chart.Series.ByIndex[o],d=a.Chart.Series.DataFields[o],k=void 0!=f[d]?f[d]:null,e={};e.Value=k;var n=
b[d].Datum,h=b[d].Multicolored;if(n.Aggregation==QueryViewerAggregationType.Average){var p=f[d+"_N"],d=f[d+"_D"];void 0==p&&void 0==d&&(p=k,d="1");e.Value_N=p;e.Value_D=d}e.Color=h?m(h,n,g,0,c,a.Chart.Categories.Values[c].Value,k):qv.util.GetNullColor();l.Points.push(e);0<e.Value&&(l.PositiveValues=!0);0>e.Value&&(l.NegativeValues=!0);if(0===c)l.MinValue=parseFloat(e.Value),l.MaxValue=parseFloat(e.Value);else if(parseFloat(e.Value)>l.MaxValue&&(l.MaxValue=parseFloat(e.Value)),parseFloat(e.Value)<
l.MinValue)l.MinValue=parseFloat(e.Value)}}function s(a,f){for(var c=0;c<f.ConditionalStyles.length;c++){var b=f.ConditionalStyles[c],g=o(b.StyleOrClass,!0),l=g[1];if(g[0]){plotBand={};plotBand.Color=qv.util.GetColorObject(l);if(b.Operator==QueryViewerConditionOperator.Interval)plotBand.From=parseFloat(b.Value1),plotBand.To=parseFloat(b.Value2);else if(b.Operator==QueryViewerConditionOperator.Equal)plotBand.From=parseFloat(b.Value1),plotBand.To=parseFloat(b.Value1);else if(b.Operator==QueryViewerConditionOperator.GreaterOrEqual||
b.Operator==QueryViewerConditionOperator.GreaterThan)plotBand.From=parseFloat(b.Value1);else if(b.Operator==QueryViewerConditionOperator.LessOrEqual||b.Operator==QueryViewerConditionOperator.LessThan)plotBand.To=parseFloat(b.Value1);plotBand.SeriesName=""!=f.Title?f.Title:f.Name;a.Chart.PlotBands.push(plotBand)}}}function c(a,f){for(var c=!1,b=0;b<a.Metadata.Axes.length;b++){var g=a.Metadata.Axes[b];if(g.Visible==QueryViewerVisible.Yes||g.Visible==QueryViewerVisible.Always){var o=qv.util.trim(f[g.DataField]);
if(g.Filter.Type==QueryViewerFilterType.HideAllValues){c=!0;break}else if(g.Filter.Type==QueryViewerFilterType.ShowSomeValues&&0>g.Filter.Values.indexOf(o)){c=!0;break}if(a.RealType===QueryViewerOutputType.Map&&g.DataType===QueryViewerDataType.Character)if(a.Region===QueryViewerRegion.Country){if(!qv.util.startsWith(o.toUpperCase(),a.Country+"-")){c=!0;break}}else if(a.Region===QueryViewerRegion.Continent)switch(a.Continent){case QueryViewerContinent.Africa:c=!qv.map.IsAfricanCountry(o.toUpperCase());
break;case QueryViewerContinent.Asia:c=!qv.map.IsAsianCountry(o.toUpperCase());break;case QueryViewerContinent.Europe:c=!qv.map.IsEuropeanCountry(o.toUpperCase());break;case QueryViewerContinent.NorthAmerica:c=!qv.map.IsNorthAmericanCountry(o.toUpperCase());break;case QueryViewerContinent.Oceania:c=!qv.map.IsOceanianCountry(o.toUpperCase());break;case QueryViewerContinent.SouthAmerica:c=!qv.map.IsSouthAmericanCountry(o.toUpperCase());break;default:c=!0}}}return c}function f(a){0>=a.TargetValue&&(a.TargetValue=
100);0>=a.MaximumValue&&(a.MaximumValue=100);a.MaximumValue<a.TargetValue&&(a.MaximumValue=a.TargetValue)}function g(a){var f=[],c=[],b="";for(x=0;x<a.Points.length;x++){var g,o;a.Aggregation==QueryViewerAggregationType.Count?(g=0,o=parseFloat(qv.util.trim(a.Points[x].Value))):a.Aggregation==QueryViewerAggregationType.Average?(g=parseFloat(qv.util.trim(a.Points[x].Value_N)),o=parseFloat(qv.util.trim(a.Points[x].Value_D))):(g=parseFloat(qv.util.trim(a.Points[x].Value)),o=1);f.push(g);c.push(o);""==
b&&(b=a.Points[x].Color)}f=qv.util.aggregate(a.Aggregation,f,c).toString();a.Points=[{Value:f,Value_N:f,Value_D:"1",Color:b}];a.NegativeValues=0>f;a.PositiveValues=0<f}function l(a,f){a.Chart.colorAxis=a.Chart.colorAxis||{};a.Chart.colorAxis.dataClasses=a.Chart.colorAxis.dataClasses||[];for(var c=0;c<f.ConditionalStyles.length;c++){var b=f.ConditionalStyles[c];colorAxis={dataClasses:[]};var g={};g.color=b.StyleOrClass.replace("color:","");b.Operator==QueryViewerConditionOperator.Interval?(g.from=
parseFloat(b.Value1),g.to=parseFloat(b.Value2),g.Operator=QueryViewerConditionOperatorSymbol.Interval):b.Operator==QueryViewerConditionOperator.Equal?(g.from=parseFloat(b.Value1),g.Operator=QueryViewerConditionOperatorSymbol.Equal):b.Operator==QueryViewerConditionOperator.GreaterOrEqual?(g.from=parseFloat(b.Value1),g.Operator=QueryViewerConditionOperatorSymbol.GreaterOrEqual):b.Operator==QueryViewerConditionOperator.GreaterThan?(g.from=parseFloat(b.Value1),g.Operator=QueryViewerConditionOperatorSymbol.GreaterThan):
b.Operator==QueryViewerConditionOperator.LessThan?(g.to=parseFloat(b.Value1),g.Operator=QueryViewerConditionOperatorSymbol.LessThan):b.Operator==QueryViewerConditionOperator.LessOrEqual?(g.to=parseFloat(b.Value1),g.Operator=QueryViewerConditionOperatorSymbol.LessOrEqual):b.Operator==QueryViewerConditionOperator.NotEqual&&(g.from=parseFloat(b.Value1),g.Operator=QueryViewerConditionOperatorSymbol.NotEqual);a.Chart.colorAxis.dataClasses.push(g)}}var p=function(a){var f=qv.util.XAxisDataType(a),b;switch(a.RealType){case QueryViewerOutputType.Chart:a=
qv.chart.IsDatetimeXAxis(a)?f==QueryViewerDataType.Date||f==QueryViewerDataType.DateTime:!0;b="GXPL_QViewerNoDatetimeAxis";break;case QueryViewerOutputType.Map:a=f==QueryViewerDataType.Character;b="GXPL_QViewerNoCharacterAxis";break;default:a=!0}return{IsOK:a,Error:a?"":gx.getMessage(b)}}(a);if(p.IsOK){a.Chart={};e(a);a.Chart.Categories.MinValue=null;a.Chart.Categories.MaxValue=null;a.Chart.Categories.Values=[];p=b(a);a.Chart.Series.ByName={};a.Chart.Series.ByIndex=[];var v=1==a.Chart.Categories.DataFields.length?
qv.util.GetAxisByDataField(a,a.Chart.Categories.DataFields[0]):null,r=h(a,v);a.Chart.PlotBands=[];for(var x=0;x<a.Chart.Series.DataFields.length;x++){var n=a.Chart.Series.DataFields[x],z=r[n].Datum,u={MinValue:null,MaxValue:null},n=r[n].Multicolored;u.FieldName=z.Name;u.Name=""!=z.Title?z.Title:z.Name;u.Visible=z.Visible;u.DataType=z.DataType;u.Aggregation=z.Aggregation;var E=z.Picture;u.Picture=""==E?u.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99":E;u.NumberFormat=
qv.util.ParseNumericPicture(u.DataType,u.Picture);u.Color=n?qv.util.GetNullColor():m(n,z,v,x,0,"",0);u.TargetValue=z.TargetValue;u.MaximumValue=z.MaximumValue;f(u);u.PositiveValues=!1;u.NegativeValues=!1;u.Points=[];a.Chart.Series.ByName[u.Name]=u;a.Chart.Series.ByIndex.push(u);a.RealType==QueryViewerOutputType.Chart&&s(a,z);a.RealType==QueryViewerOutputType.Map&&l(a,z)}for(x=z=0;x<a.Data.Rows.length;x++)u=a.Data.Rows[x],c(a,u)||(k(a,u,z,p),q(a,u,z,r,v),z++);if(a.RealType==QueryViewerOutputType.Chart&&
qv.chart.IsGaugeChart(a))for(x=0;x<a.Chart.Series.DataFields.length;x++)u=a.Chart.Series.ByIndex[x],g(u);return""}return p.Error},getTranslation:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime?gx.getMessage(a):a},getTranslationAlsoIfStatic:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime||qv.TranslationType==QueryViewerTranslationType.Static?gx.getMessage(a):a}};var STATE_DONE=4,STATUS_OK=200,METADATA_VERSION=2;
qv.services=function(){function a(a){return eval(a)[1].replace(/\\/g,".")}function d(a,b){var d=qv.services.RuntimeFieldsJSON(a),e=qv.services.RuntimeParametersJSON(a),h="",c="",f;a:switch(a.RealType){case QueryViewerOutputType.Table:f="IgnoreType";break a;case QueryViewerOutputType.Chart:case QueryViewerOutputType.Card:f="IgnoreTypeAndAxis";break a;default:f="IgnoreNot"}""!=a.QueryInfo&&(c=eval("("+a.QueryInfo+")"),h=c.TextForNullValues,c=gx.json.serializeJson(c.Fields));return a.ObjectName!=b.ObjectName||
a.ObjectType!=b.ObjectType||a.ObjectId!=b.ObjectId||a.Object!=b.Object||d!=b.RuntimeFieldsJSON||e!=b.RuntimeParametersJSON||h!=b.QueryInfoTextForNullValues||c!=b.QueryInfoFieldsJSON||f!=b.MetadataType?(b.ObjectName=a.ObjectName,b.ObjectType=a.ObjectType,b.ObjectId=a.ObjectId,b.Object=a.Object,b.RuntimeFieldsJSON=d,b.RuntimeParametersJSON=e,b.QueryInfoTextForNullValues=h,b.QueryInfoFieldsJSON=c,b.MetadataType=f,!0):!1}function e(a,d){function e(a,f,c){for(var a=b(a),g=0;g<f.length;g++){var d=f[g],
l="";void 0!=d[c]&&(l=d[c].Type);""!=l&&(d=qv.services.postInfo._priv.SdtWithValuesJSON("Order",l,QueryViewerAxisOrderType.Custom,d[c].Values,!1),a+=","+d)}return a}var h=qv.services.RuntimeParametersJSON(a),s=e(a,a.Axes,"AxisOrder"),c="",f="",g="",l=a.RealType==QueryViewerOutputType.Table?"PagedRecordSet":a.RealType==QueryViewerOutputType.PivotTable?"PagedLineSet":"NotPaged";""!=a.QueryInfo&&(g=eval("("+a.QueryInfo+")"),c=g.SQLSentence,f=gx.json.serializeJson(g.Parameters),g=e(a,g.Fields,"Order"));
return a.ObjectName!=d.ObjectName||a.ObjectType!=d.ObjectType||a.ObjectId!=d.ObjectId||a.Object!=d.Object||h!=d.RuntimeParametersJSON||s!=d.OrderJSON||c!=d.QueryInfoSQLSentence||f!=d.QueryInfoParametersJSON||g!=d.QueryInfoOrderJSON||l!=d.DataType?(d.ObjectName=a.ObjectName,d.ObjectType=a.ObjectType,d.ObjectId=a.ObjectId,d.Object=a.Object,d.RuntimeParametersJSON=h,d.OrderJSON=s,d.QueryInfoSQLSentence=c,d.QueryInfoParametersJSON=f,d.QueryInfoOrderJSON=g,d.DataType=l,!0):!1}function b(a){return a.RealType==
QueryViewerOutputType.Chart&&qv.chart.IsDatetimeXAxis(a)||a.RealType==QueryViewerOutputType.Card&&(a.IncludeSparkline||a.IncludeTrend)}function h(a,b){return{Success:a,Message:b}}return{url:function(){function a(b,o){var c=qv.util.getGenerator(),f;f=(new Date).getTime();var g=b.enableServerDebug?"_debug":"";switch(c){case "C#":var c=new gx.util.Url(location.href),l=c.path,l=l.substr(0,l.lastIndexOf("/")+1);urlresult=""==c.port?c.protocol+"://"+c.host+l:c.protocol+"://"+c.host+":"+c.port+l;return urlresult+
"agxpl_get"+g+".aspx?"+o+","+f;case "Java":return d(!1)+"qviewer.services.agxpl_get"+g+"?"+o+","+f;default:return""}}function b(){var a;a=""!=gx.staticDirectory?gx.staticDirectory:this.getCookie("StaticContent");return qv.util.startsWith(a,"/")?a.substr(1,a.length-1):a}function d(a){var o=gx.util.resourceUrl(gx.basePath,!0);a&&(o+=b());return o}return{getDefaultOutputURL:function(b){return a(b,"defaultoutput")},getRecordsetCacheKeyURL:function(b){return a(b,"recordsetcachekey")},getMetadataURL:function(b){return a(b,
"metadata")},getDataURL:function(b){return a(b,"data")},getAttributeValuesURL:function(b){return a(b,"attributevalues")},getPageDataForTableURL:function(b){return a(b,"pagedatafortable")},getPageDataForPivotTableURL:function(b){return a(b,"pagedataforpivottable")},getQueryParametersURL:function(b){return a(b,"queryparameters")},getDashboardSpecURL:function(b){return a(b,"dashboardspec")},getStaticDirectory:function(){return"Java"===qv.util.getGenerator()?d(!0):""}}}(),postInfo:function(){function d(a,
b){var c="",o,k,h,q,n,z,u,E,J,t,D;o=!1;for(i=0;void 0!=a.Axes[i];i++){o=!0;c+=""!=c?",":"";c+="{";k="";q=h=0;z=n="";E=u=!0;D=t=J="";var C;C=a.Axes[i];var A="",y=!1;if(void 0!=C.Format&&void 0!=C.Format.ValuesStyles)for(var w=0;void 0!=C.Format.ValuesStyles[w];w++)y=!0,A+=""!=A?",":"",A+="{",A+='"Value":"'+encodeURIComponent(C.Format.ValuesStyles[w].Value)+'"',A+=",",A+='"Style":"'+encodeURIComponent(C.Format.ValuesStyles[w].StyleOrClass)+'"',A+=",",A+='"Propagate":'+(C.Format.ValuesStyles[w].ApplyToRowOrColumn?
"true":"false"),A+="}";y&&(A='"ValuesStyles":['+A+"]");C=A;A=a.Axes[i];y="";w=!1;if(void 0!=A.Format&&void 0!=A.Format.ConditionalStyles)for(var s=0;void 0!=A.Format.ConditionalStyles[s];s++)w=!0,y+=""!=y?",":"",y+="{",y+='"Operator":"'+A.Format.ConditionalStyles[s].Operator+'"',y+=",",y+='"Value1":"'+encodeURIComponent(A.Format.ConditionalStyles[s].Value1)+'"',A.Format.ConditionalStyles[s].Operator==QueryViewerConditionOperator.Interval&&(y+=",",y+='"Value2":"'+encodeURIComponent(A.Format.ConditionalStyles[s].Value2)+
'"'),y+=",",y+='"Style":"'+encodeURIComponent(A.Format.ConditionalStyles[s].StyleOrClass)+'"',y+="}";w&&(y='"ConditionalStyles":['+y+"]");A=y;y=a.Axes[i];w="";void 0!=y.Grouping&&(w+="{",w+='"GroupByYear":'+(y.Grouping.GroupByYear?"true":"false"),w+=",",w+='"YearTitle":"'+y.Grouping.YearTitle+'"',w+=",",w+='"GroupBySemester":'+(y.Grouping.GroupBySemester?"true":"false"),w+=",",w+='"SemesterTitle":"'+y.Grouping.SemesterTitle+'"',w+=",",w+='"GroupByQuarter":'+(y.Grouping.GroupByQuarter?"true":"false"),
w+=",",w+='"QuarterTitle":"'+y.Grouping.QuarterTitle+'"',w+=",",w+='"GroupByMonth":'+(y.Grouping.GroupByMonth?"true":"false"),w+=",",w+='"MonthTitle":"'+y.Grouping.MonthTitle+'"',w+=",",w+='"GroupByDayOfWeek":'+(y.Grouping.GroupByDayOfWeek?"true":"false"),w+=",",w+='"DayOfWeekTitle":"'+y.Grouping.DayOfWeekTitle+'"',w+=",",w+='"HideValue":'+(y.Grouping.HideValue?"true":"false"),w+="}",w='"Grouping":'+w);y=w;void 0!=a.Axes[i].Format&&(k=a.Axes[i].Format.Picture?a.Axes[i].Format.Picture:"",h=a.Axes[i].Format.TargetValue?
a.Axes[i].Format.TargetValue:0,q=a.Axes[i].Format.MaximumValue?a.Axes[i].Format.MaximumValue:0,n=a.Axes[i].Format.Style?a.Axes[i].Format.Style:"",z=a.Axes[i].Format.Subtotals?a.Axes[i].Format.Subtotals:"",u=void 0!=a.Axes[i].Format.CanDragToPages?a.Axes[i].Format.CanDragToPages:!0);void 0!=a.Axes[i].Actions&&(E=a.Axes[i].Actions.RaiseItemClick);void 0!=a.Axes[i].AxisOrder&&(J=a.Axes[i].AxisOrder.Type);void 0!=a.Axes[i].ExpandCollapse&&(t=a.Axes[i].ExpandCollapse.Type);void 0!=a.Axes[i].Filter&&(D=
a.Axes[i].Filter.Type);void 0==D&&(D=QueryViewerFilterType.ShowSomeValues);c+='"Name":"'+encodeURIComponent(a.Axes[i].Name)+'"';c+=",";c+='"Caption":"'+encodeURIComponent(a.Axes[i].Title)+'"';c+=",";c+='"Aggregation":"'+a.Axes[i].Aggregation+'"';c+=",";c+='"Visible":"'+a.Axes[i].Visible+'"';c+=",";c+='"Type":"'+a.Axes[i].Type+'"';c+=",";c+='"Axis":"'+a.Axes[i].Axis+'"';c+=",";c+='"Picture":"'+encodeURIComponent(k)+'"';c+=",";c+='"TargetValue":'+h;c+=",";c+='"MaximumValue":'+q;c+=",";c+='"Style":"'+
n+'"';c+=",";c+='"Subtotals":"'+z+'"';c+=",";c+='"CanDragToPages":'+u;c+=",";c+='"RaiseItemClick":'+E;""!=J&&(k=e("Order",J,QueryViewerAxisOrderType.Custom,a.Axes[i].AxisOrder.Values,b),c+=""!=k?","+k:"");""!=t&&(t=e("ExpandCollapse",t,QueryViewerExpandCollapseType.ExpandSomeValues,a.Axes[i].ExpandCollapse.Values,b),c+=""!=t?","+t:"");""!=D&&a.Axes[i].Filter.Values&&(D=e("Filter",D,QueryViewerFilterType.ShowSomeValues,a.Axes[i].Filter.Values,b),c+=""!=D?","+D:"");c+=""!=C?","+C:"";c+=""!=A?","+A:
"";c+=""!=y?","+y:"";c+="}"}o&&(c='"RuntimeFields":['+c+"]");return c}function e(a,c,b,d,o){var k="";if(""!=c){k=k+('"'+a+'":')+"{"+('"Type":"'+c+'"');strValues="";if(c==b){existValues=!1;for(j=0;void 0!=d[j];j++)existValues=!0,strValues+=""!=strValues?",":"",strValues=o?strValues+('"'+encodeURIComponent(d[j])+'"'):strValues+('"'+d[j]+'"');existValues&&(strValues=',"Values":['+strValues+"]")}k+=strValues;k+="}"}return k}function k(a){var c="",b=!1;if(a.Object){a=eval(a.Object);for(i=2;i<a.length;i++)b=
!0,c+=""!=c?",":"",c+="{",c+='"Value":"'+encodeURIComponent(a[i])+'"',c+="}"}else for(i=0;void 0!=a.Parameters[i];i++)b=!0,c+=""!=c?",":"",c+="{",c+='"Name":"'+a.Parameters[i].Name+'"',c+=",",c+='"Value":"'+encodeURIComponent(a.Parameters[i].Value)+'"',c+="}";b&&(c='"RuntimeParameters":['+c+"]");return c}function h(a){var c="",b=!1;for(i=0;void 0!=a[i];i++){b=!0;c+=""!=c?",":"";c+="{";c+='"DataField":"'+a[i].DataField+'"';c+=",";c+='"NullIncluded":'+a[i].NullIncluded;strIncludedValues="";existValues=
!1;for(j=0;void 0!=a[i].NotNullValues.Included[j];j++)existValues=!0,strIncludedValues+=""!=strIncludedValues?",":"",strIncludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Included[j])+'"';existValues&&(strIncludedValues=',"Included":['+strIncludedValues+"]");strExcludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Excluded[j];j++)existValues=!0,strExcludedValues+=""!=strExcludedValues?",":"",strExcludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Excluded[j])+'"';existValues&&
(strExcludedValues=',"Excluded":['+strExcludedValues+"]");c+=",";c+='"NotNullValues":{"DefaultAction":"'+a[i].NotNullValues.DefaultAction+'"'+strIncludedValues+strExcludedValues+"}";c+="}"}b&&(c='"Filters":['+c+"]");return c}function s(a){return a.UseRecordsetCache?'{"ActualKey":"'+a.RecordsetCache.ActualKey+'","OldKey":"'+a.RecordsetCache.OldKey+'","MinutesToKeep":'+a.MinutesToKeepInRecordsetCache+',"MaximumSize":'+a.MaximumCacheSize+"}":'{"ActualKey":"","OldKey":"","MinutesToKeep":0,"MaximumSize":0}'}
function c(c){var b;b=""+(""!=c.ParentObject.PackageName?'"ApplicationNamespace":"'+c.ParentObject.PackageName+'",':"");c.Object?b+='"ObjectName":"'+a(c.Object)+'"':(b+='"ObjectName":"'+c.ObjectName+'"',b=b+","+('"Alt_ObjectType":"'+c.ObjectType+'"'),b=b+","+('"Alt_ObjectId":'+c.ObjectId));return b}return{DefaultOutput:function(a){var b;b="{"+c(a);b+=""!=a.ObjectInfo?',"ObjectInfo":'+a.ObjectInfo:"";return"Data="+encodeURIComponent(b+"}")},RecordsetCacheKey:function(a){a="{"+c(a);return"Data="+encodeURIComponent(a+
"}")},Metadata:function(a){var b="",e=k(a),h=d(a,!0),b=b+"{"+c(a),b=b+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),b=b+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),b=b+(""!=e?","+e:"")+(""!=h?","+h:"")+","+('"OutputType":"'+a.RealType+'"'),b=b+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),b=b+","+('"RememberLayout":'+a.RememberLayout),b=b+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"'),b=b+","+('"RecordsetCacheInfo":'+s(a)),b=b+","+('"ReturnSampleData":'+a.ReturnSampleData),
b=b+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(b+"}")},Data:function(a){var g="",e=k(a),h=d(a,!0),g=g+"{"+c(a),g=g+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),g=g+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),g=g+(""!=e?","+e:"")+(""!=h?","+h:"")+","+('"OutputType":"'+a.RealType+'"'),g=g+","+('"SortAscendingForced":'+b(a)),g=g+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),g=g+","+('"RecordsetCacheInfo":'+s(a)),g=g+","+('"ReturnSampleData":'+
a.ReturnSampleData),g=g+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(g+"}")},AttributeValues:function(a,b,e,h,v){var m="",q=k(a),n=d(a,!0),m=m+"{"+c(a),m=m+","+('"DataField":"'+b+'"')+","+('"PageNumber":'+e)+","+('"PageSize":'+h)+","+('"Filter":"'+v+'"')+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),m=m+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),m=m+(""!=q?","+q:"")+(""!=n?","+n:"")+","+('"OutputType":"'+a.RealType+'"'),m=m+","+('"AllowElementsOrderChange":'+
a.AllowElementsOrderChange),m=m+","+('"RecordsetCacheInfo":'+s(a)),m=m+","+('"ReturnSampleData":'+a.ReturnSampleData),m=m+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(m+"}")},TablePageData:function(a,b,e,p,m,r,x){var n="",z=k(a),u=d(a,!0),x=h(x),n=n+"{"+c(a),n=n+","+('"PageNumber":'+b)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?e:0)),n=n+","+('"ReturnTotPages":'+p)+","+('"Order":'+('{"DataField":"'+m+'","Type":"'+r+'"}'))+(""!=x?","+x:"")+(""!=a.QueryInfo?
',"QueryInfo":'+a.QueryInfo:""),n=n+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),n=n+(""!=z?","+z:"")+(""!=u?","+u:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),n=n+","+('"RecordsetCacheInfo":'+s(a)),n=n+","+('"ReturnSampleData":'+a.ReturnSampleData),n=n+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(n+"}")},PivotTablePageData:function(a,b,e,p,m,r,x,n,z){for(var u="",E=k(a),J=d(a,!0),t="",D=!1,C=0;void 0!=m[C];C++)D=!0,t+=""!=t?",":
"",t+="{",t+='"DataField":"'+m[C].DataField+'"',t+=",",t+='"Visible":'+!m[C].Hidden,t+=",",t+='"Axis":"'+m[C].Axis.Type+'"',t+=",",t+='"Position":'+(qv.util.IsInteger(m[C].Axis.Position)?m[C].Axis.Position:0),t+=",",t+='"Order":"'+m[C].Order+'"',t+=",",t+='"Subtotals":'+m[C].Subtotals,t+="}";D&&(t='"AxesInfo":['+t+"]");m=t;t="";D=!1;for(C=0;void 0!=r[C];C++)D=!0,t+=""!=t?",":"",t+="{",t+='"DataField":"'+r[C].DataField+'"',t+=",",t+='"Visible":'+!r[C].Hidden,t+=",",t+='"Position":'+(qv.util.IsInteger(r[C].Position)?
r[C].Position:0),t+="}";D&&(t='"DataInfo":['+t+"]");r=t;x=h(x);t="";D=!1;for(C=0;void 0!=n[C];C++){D=!0;t+=""!=t?",":"";t+="{";t+='"DataField":"'+n[C].DataField+'"';t+=",";t+='"NullExpanded":'+n[C].NullExpanded;strExpandedValues="";existValues=!1;for(var A=0;void 0!=n[C].NotNullValues.Expanded[A];A++)existValues=!0,strExpandedValues+=""!=strExpandedValues?",":"",strExpandedValues+='"'+encodeURIComponent(n[C].NotNullValues.Expanded[A])+'"';existValues&&(strExpandedValues=',"Expanded":['+strExpandedValues+
"]");strCollapsedValues="";existValues=!1;for(A=0;void 0!=n[C].NotNullValues.Collapsed[A];A++)existValues=!0,strCollapsedValues+=""!=strCollapsedValues?",":"",strCollapsedValues+='"'+encodeURIComponent(n[C].NotNullValues.Collapsed[A])+'"';existValues&&(strCollapsedValues=',"Collapsed":['+strCollapsedValues+"]");t+=",";t+='"NotNullValues":{"DefaultAction":"'+n[C].NotNullValues.DefaultAction+'"'+strExpandedValues+strCollapsedValues+"}";t+="}"}D&&(t='"ExpandCollapse":['+t+"]");n=t;u=u+"{"+c(a);u=u+","+
('"PageNumber":'+b)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?e:0));u=u+","+('"ReturnTotPages":'+p)+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"');u=u+(""!=m?","+m:"")+(""!=r?","+r:"")+(""!=x?","+x:"")+(""!=n?","+n:"")+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:"");u+=""!=a.AppSettings?',"AppSettings":'+a.AppSettings:"";u=u+(""!=E?","+E:"")+(""!=J?","+J:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange);u=u+","+('"RecordsetCacheInfo":'+s(a));u=u+","+('"LayoutChanged":'+
z)+","+('"ReturnSampleData":'+a.ReturnSampleData);u=u+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(u+"}")},getQueryParameters:function(a){var b;b="{"+c(a);b+=""!=a.ObjectInfo?',"ObjectInfo":'+a.ObjectInfo:"";return"Data="+encodeURIComponent(b+"}")},DashboardSpec:function(c){var b="";c.Object&&(b=a(c.Object));c=JSON.stringify({ApplicationNamespace:c.ParentObject.PackageName,ObjectName:b,Alt_ObjectId:0});return"Data="+encodeURIComponent(c)},_priv:{RuntimeParametersJSON:function(a){return k(a)},
RuntimeFieldsJSON:function(a){return d(a)},SdtWithValuesJSON:function(a,c,b,d,o){return e(a,c,b,d,o)}}}}(),RuntimeParametersJSON:function(a){return this.postInfo._priv.RuntimeParametersJSON(a)},RuntimeFieldsJSON:function(a,b){return this.postInfo._priv.RuntimeFieldsJSON(a,b)},getXMLHttpRequest:function(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}},CallServerSync:function(a,b,d,e){e=e||[];e.unshift(a);a=b.call(qv.services.url,
a);d=d.apply(qv.services.postInfo,e);e=qv.services.getXMLHttpRequest();e.open("POST",a,!1);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.send(d);return e.responseText},createAsyncServerCallFn:function(a,b,d,e,h){return function(c,f){f=f||[];f.unshift(a);var g=function(b){h&&a.RealType!=QueryViewerOutputType.Card&&(b=h.call(qv.util.css,b));c(b,a)};if(gx.lang.gxBoolean(a.IsExternalQuery))g(a.ExternalQueryResultObj()[e]);else{var l=b.call(qv.services.url,a),p=d.apply(qv.services.postInfo,
f),v=qv.services.getXMLHttpRequest(),r=function(){v.readyState==STATE_DONE&&v.status==STATUS_OK&&g(v.responseText)};gx.util.browser.isIE()?v.onreadystatechange=r:v.onload=r;v.open("POST",l);v.setRequestHeader("Content-Type","application/x-www-form-urlencoded");v.send(p)}}},parseRecordsetCacheKeyXML:function(a){""!=a.xml.recordsetCacheKey&&(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.OldKey=a.RecordsetCache.ActualKey?a.RecordsetCache.ActualKey:"",a.RecordsetCache.ActualKey=a.xml.recordsetCacheKey)},
parseDataXML:function(a){if(""!=a.xml.data){var b=qv.util.dom.xmlDocument(a.xml.data),b=qv.util.dom.getSingleElementByTagName(b,"Recordset");a.Data=a.Data||{};b=gx.util.browser.isIE()?qv.util.dom.getMultipleElementsByTagName(qv.util.dom.getSingleElementByTagName(b,"Page"),"Record"):qv.util.dom.getMultipleElementsByTagName(b,"Record");a.Data.Rows=[];for(var d=0;d<b.length;d++){for(var e={},h=0;h<b[d].childNodes.length;h++){var c=b[d].childNodes[h];1==c.nodeType&&(e[c.nodeName]=1==c.childNodes.length?
c.childNodes[0].nodeValue:"")}a.Data.Rows.push(e)}}},parseMetadataXML:function(a){function b(a,c){if("greaterequal"==a&&"lessequal"==c)return QueryViewerConditionOperator.Interval;switch(a){case "equal":return QueryViewerConditionOperator.Equal;case "less":return QueryViewerConditionOperator.LessThan;case "greater":return QueryViewerConditionOperator.GreaterThan;case "lessequal":return QueryViewerConditionOperator.LessOrEqual;case "greaterequal":return QueryViewerConditionOperator.GreaterOrEqual;
case "notequal":return QueryViewerConditionOperator.NotEqual}}function d(a,c,b,f){var e={},a=qv.util.dom.getSingleElementByTagName(a,c);if(null!=a){e.GroupFound=!0;e.TotalValueFound=!1;b=qv.util.dom.getMultipleElementsByTagName(a,b);e.Values=[];for(a=0;a<b.length;a++)c=null!=b[a].firstChild?b[a].firstChild.nodeValue:"","TOTAL"==c&&f?e.TotalValueFound=!0:e.Values.push(c)}else e.GroupFound=!1;return e}function e(a){if(0==a.indexOf("gxpl_cssReplace("))var c=a.indexOf("gxpl_cssReplace("),b=a.indexOf(")",
c),a=a.substring(c+16,b);return a}function s(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"formatValues"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"value"):[],c=[],b=0;b<a.length;b++){var d={};d.Value=qv.util.trim(null!=a[b].firstChild?a[b].firstChild.nodeValue:"");d.StyleOrClass=e(a[b].getAttribute("format"));d.ApplyToRowOrColumn="yes"==a[b].getAttribute("recursive");c.push(d)}return c}function c(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"conditionalFormats"),a=null!=
a?qv.util.dom.getMultipleElementsByTagName(a,"rule"):[],c=[],d=0;d<a.length;d++){var f={};f.Operator=b(a[d].getAttribute("op1"),a[d].getAttribute("op2"));f.Value1=parseFloat(a[d].getAttribute("value1"));f.Operator==QueryViewerConditionOperator.Interval&&(f.Value2=parseFloat(a[d].getAttribute("value2")));f.StyleOrClass=e(a[d].getAttribute("format"));c.push(f)}return c}if(""!=a.xml.metadata){var f=qv.util.dom.xmlDocument(a.xml.metadata),g=qv.util.dom.getSingleElementByTagName(f,"OLAPCube"),f=g.getAttribute("Version");
if(null==f||parseInt(f)==METADATA_VERSION){a.Metadata=a.Metadata||{};a.Metadata.TextForNullValues=g.getAttribute("textForNullValues");var l=qv.util.dom.getMultipleElementsByTagName(g,"OLAPDimension");a.Metadata.Axes=[];for(f=0;f<l.length;f++){var p={};p.Name=l[f].getAttribute("name");p.Title=l[f].getAttribute("displayName");p.DataField=l[f].getAttribute("dataField");p.DataType=l[f].getAttribute("dataType");p.Visible=l[f].getAttribute("visible");p.Axis=l[f].getAttribute("axis");p.Picture=l[f].getAttribute("picture");
if(""==p.Picture)switch(p.DataType){case QueryViewerDataType.Integer:p.Picture="ZZZZZZZZZZZZZZ9";break;case QueryViewerDataType.Real:p.Picture="ZZZZZZZZZZZZZZ9.99";break;case QueryViewerDataType.Date:p.Picture="99/99/9999";break;case QueryViewerDataType.DateTime:p.Picture="99/99/9999 99:99:99";break;case QueryViewerDataType.GUID:p.Picture="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"}p.CanDragToPages=qv.util.dom.getBooleanAttribute(l[f],"canDragToPages",!0);p.RaiseItemClick=qv.util.dom.getBooleanAttribute(l[f],
"raiseItemClick",!0);p.IsComponent=qv.util.dom.getBooleanAttribute(l[f],"isComponent",!1);p.Style=l[f].getAttribute("format");var v=d(l[f],"include","value",!0),r=d(l[f],"exclude","value",!0),x=d(l[f],"expand","value",!1),n=d(l[f],"customOrder","Value",!1);p.Subtotals="no"==l[f].getAttribute("summarize")?QueryViewerSubtotals.No:r.GroupFound&&r.TotalValueFound?QueryViewerSubtotals.Hidden:QueryViewerSubtotals.Yes;p.Filter={};!v.GroupFound&&!r.GroupFound?(p.Filter.Type=QueryViewerFilterType.ShowAllValues,
p.Filter.Values=[]):!v.GroupFound&&r.GroupFound&&0==r.Values.length&r.TotalValueFound?(p.Filter.Type=QueryViewerFilterType.ShowAllValues,p.Filter.Values=[]):v.GroupFound&&!r.GroupFound&&0==v.Values.length?(p.Filter.Type=QueryViewerFilterType.HideAllValues,p.Filter.Values=[]):(p.Filter.Type=QueryViewerFilterType.ShowSomeValues,p.Filter.Values=v.Values);p.ExpandCollapse={};x.GroupFound?x.GroupFound&&0==x.Values.length?(p.ExpandCollapse.Type=QueryViewerExpandCollapseType.CollapseAllValues,p.ExpandCollapse.Values=
[]):(p.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandSomeValues,p.ExpandCollapse.Values=x.Values):(p.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandAllValues,p.ExpandCollapse.Values=[]);p.Order={};v=l[f].getAttribute("order");null==v?(p.Order.Type=QueryViewerAxisOrderType.None,p.Order.Values=[]):(p.Order.Type=qv.util.capitalize(v),p.Order.Values=p.Order.Type==QueryViewerAxisOrderType.Custom?n.Values:[]);p.ValuesStyles=s(l[f]);a.Metadata.Axes.push(p)}g=qv.util.dom.getMultipleElementsByTagName(g,
"OLAPMeasure");a.Metadata.Data=[];for(f=0;f<g.length;f++)l={},l.Name=g[f].getAttribute("name"),l.Title=g[f].getAttribute("displayName"),l.DataField=g[f].getAttribute("dataField"),l.Aggregation=g[f].getAttribute("aggregation"),l.DataType=g[f].getAttribute("dataType"),l.Visible=g[f].getAttribute("visible"),l.Picture=g[f].getAttribute("picture"),l.RaiseItemClick=qv.util.dom.getBooleanAttribute(g[f],"raiseItemClick",!0),l.IsComponent=qv.util.dom.getBooleanAttribute(g[f],"isComponent",!1),""==l.Picture&&
(l.Picture=l.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99"),l.Aggregation=qv.util.capitalize(l.Aggregation),l.TargetValue=parseFloat(g[f].getAttribute("targetValue")),l.MaximumValue=parseFloat(g[f].getAttribute("maximumValue")),l.Style=g[f].getAttribute("format"),0>=l.TargetValue&&(l.TargetValue=100),0>=l.MaximumValue&&(l.MaximumValue=100),l.ConditionalStyles=c(g[f]),p=qv.util.dom.getCharacterAttribute(g[f],"formula",""),l.IsFormula=""!=p,l.Formula=p,a.Metadata.Data.push(l);
a.Metadata.ParserResult=h(!0,"")}else a.Metadata.ParserResult=h(!1,gx.getMessage("GXPL_QViewerWrongMetadataVersion").replace("{0}",METADATA_VERSION))}},GetDataIfNeeded:function(a,b){a.Data=a.Data||{};a.Data.LastServiceCallKey=a.Data.LastServiceCallKey||{};void 0==a.xml.data||e(a,a.Data.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableData(b):b(a.xml.data,a)},GetMetadataIfNeeded:function(a,b){a.Metadata=a.Metadata||{};a.Metadata.LastServiceCallKey=a.Metadata.LastServiceCallKey||
{};void 0==a.xml.metadata||d(a,a.Metadata.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableMetadata(b):b(a.xml.metadata,a)},GetDashboardSpecIfNeeded:function(b,d){b.DashboardSpec=b.DashboardSpec||"";b.LastServiceCallKey=b.LastServiceCallKey||{};var e;if(!(e=void 0==b.DashboardSpec))if(e=b.LastServiceCallKey,b.Object){var h=a(b.Object);h!=e.ObjectName?(e.ObjectName=h,e=!0):e=!1}else e=""==b.DashboardSpec;e?(b.LoadingSpec=!0,b.GetDashboardSpec(d)):d(b.DashboardSpec,b)},
GetRecordsetCacheKeyIfNeeded:function(a,b){a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery)?(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.LastServiceCallKey=a.RecordsetCache.LastServiceCallKey||{},void 0==a.xml.recordsetCacheKey||e(a,a.RecordsetCache.LastServiceCallKey)?a.getRecordsetCacheKey(b):b(a.xml.recordsetCacheKey,a)):b("",a)},IsObjectSet:function(a){return a.Object||""!=a.ObjectName||""!=a.ObjectType&&0!=a.ObjectId}}}();
qv.pivot=function(){function a(a){var d=qv.util.GetContainerControlClasses(a);""!=d&&qv.util.SetUserControlClass(a,d);d=a.userControlId()+"_"+a.RealObjectName().replace(/,/g,"").replace(/\./g,"")+"_pivot_page";a.pivotParams={};a.pivotParams.page=d;var e=a.userControlId()+"_"+a.RealObjectName().replace(/,/g,"").replace(/\./g,"")+"_pivot_content";a.pivotParams.content=e;if(a._ControlRenderedTo!=a.RealType||0==jQuery("#"+e).length)if(a._ControlRenderedTo!=a.RealType&&a.RealType==QueryViewerOutputType.PivotTable){var m=
qv.util.dom.getEmptyContainer(a);qv.util.dom.createDiv(m,d,"","",{},"");qv.util.dom.createDiv(m,e,"","",{},"")}else jQuery("#"+a.ContainerName).find(".pivot_filter_div").attr("id",d),jQuery("#"+a.ContainerName).find(".conteiner_table_div").attr("id",e);a.pivotParams.container=a.getContainerControl();a.pivotParams.RealType=a.RealType;a.pivotParams.ObjectName=a.RealObjectName();a.pivotParams.ControlName=a.ControlName;a.pivotParams.PageSize=a.Paging&&"false"!=a.Paging?a.PageSize:void 0;a.pivotParams.metadata=
a.xml.metadata;d=gx.lang.gxBoolean(a.IsExternalQuery)?a.xml.data:a.RealType==QueryViewerOutputType.Table?a.ServerPagingForTable?a.xml.pageData:a.xml.data:a.ServerPagingForPivotTable?a.xml.pageData:a.xml.data;a.pivotParams.data=d;a.pivotParams.UcId=a.userControlId();a.pivotParams.AutoResize=gx.lang.gxBoolean(a.AutoResize)||gx.lang.gxBoolean(a.ShrinkToFit);a.pivotParams.DisableColumnSort=a.DisableColumnSort;a.pivotParams.RememberLayout=a.RememberLayout;a.pivotParams.ShowDataLabelsIn=a.ShowDataLabelsIn;
a.pivotParams.ServerPaging=a.ServerPagingForTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingPivot=a.ServerPagingForPivotTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingCacheSize=0;a.pivotParams.UseRecordsetCache=a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.AllowSelection=a.AllowSelection;a.pivotParams.SelectLine=!0;void 0!=OAT.Loader?renderJSPivot(a.pivotParams,qv.collection,a):OAT.Loader.addListener(function(){renderJSPivot(a.pivotParams,
qv.collection,a)});a._ControlRenderedTo=a.RealType;a.RealType==QueryViewerOutputType.Table&&qv.util.hideActivityIndicator(a)}function d(b){b.getPageDataForTable(function(b,d){(new Date).getTime();qv.util.anyError(b)?(errMsg=qv.util.getErrorFromText(b),qv.util.renderError(d,errMsg)):(""!=b&&(d.xml.pageData=b),a(d))},[1,b.PageSize,!0,"","",[]])}function e(a,d){var e=[];if(null!=a)for(var m=-1,k=0;k<a.childNodes.length;k++)if("ITEM"==a.childNodes[k].nodeName){var q=a.childNodes[k].getAttribute("name");
if(0>d.indexOf(q)){m++;e[m]={};e[m].Name=q;e[m].Values=[];for(var q=-1,s=a.childNodes[k],c=0;c<a.childNodes[k].childNodes.length;c++)if("VALUES"==a.childNodes[k].childNodes[c].nodeName){s=a.childNodes[k].childNodes[c];break}for(c=0;c<s.childNodes.length;c++)"VALUE"==s.childNodes[c].nodeName&&(q++,e[m].Values[q]=null!=s.childNodes[c].firstChild?s.childNodes[c].firstChild.nodeValue:"")}}return e}return{tryToRenderPivotTable:function(b){var e="",o=(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,
function(b,k){var q=!1;b!=k.xml.recordsetCacheKey&&(k.xml.recordsetCacheKey=b,q=!0);qv.util.anyError(b)?(e=qv.util.getErrorFromText(b),qv.util.renderError(k,e)):(q&&qv.services.parseRecordsetCacheKeyXML(k),qv.services.GetMetadataIfNeeded(k,function(b,c){var f=false;if(b!=c.xml.metadata){c.xml.metadata=b;f=true}var g=(new Date).getTime();if(qv.util.anyError(b)){e=qv.util.getErrorFromText(b);qv.util.renderError(c,e)}else{f&&qv.services.parseMetadataXML(c);if(c.Metadata.ParserResult.Success)if(c.ServerPagingForTable&&
c.RealType==QueryViewerOutputType.Table&&!gx.lang.gxBoolean(c.IsExternalQuery)){f=false;OAT.getStateWhenServingPaging&&(f=OAT.getStateWhenServingPaging(c.userControlId()+"_"+c.ObjectName,c.ObjectName));!f||!c.RememberLayout?d(c,o,g):a(c)}else if(c.ServerPagingForPivotTable&&c.RealType==QueryViewerOutputType.PivotTable&&!gx.lang.gxBoolean(c.IsExternalQuery)){f=false;OAT.getStateWhenServingPaging&&(f=OAT.getStateWhenServingPaging(c.userControlId()+"_"+c.ObjectName,c.ObjectName));a(c)}else qv.services.GetDataIfNeeded(c,
function(c,b){if(c!=b.xml.data)b.xml.data=c;(new Date).getTime();if(qv.util.anyError(c)){e=qv.util.getErrorFromText(c);qv.util.renderError(b,e)}else a(b)});else qv.util.renderError(c,c.Metadata.ParserResult.Message)}}))})},GetMetadataPivot:function(a){var d=qv.util.GetDesigntimeMetadata(a);if(0<d.length){for(var e=a.oat_element.getMetadataXML(),e=qv.pivot.GetRuntimeMetadata(e,a.RealType),m=[],a=qv.util.GetOrderedElementsKeys(a,e),k=0;k<a.length;k++)for(var q=parseInt(a[k].substr(6,4)),q=e[q],s,c=
0;c<d.length;c++)if(s=d[c],s.Name==q.Name){s=qv.util.cloneObject(s);qv.util.MergeFields(q,s);m.push(s);break}return m}return[]},GetRuntimeMetadata:function(a,d){function e(a,c,b,d,f){var c=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(a,c)),g=[];if(c==d&&(a=qv.util.dom.getSingleElementByTagName(a,b),null!=a)){a=qv.util.dom.getMultipleElementsByTagName(a,"value");for(b=0;b<a.length;b++)d=qv.util.trim(qv.util.dom.getValueNode(a[b])),null!=d&&("TOTAL"!=d.toUpperCase()||!f)&&g.push(d)}return{Type:c,
Values:g}}var m=qv.util.dom.xmlDocument(a),m=qv.util.dom.getSingleElementByTagName(m,"OLAPCube"),k=[],q;q=qv.util.dom.getMultipleElementsByTagName(m,"OLAPDimension");for(var s=0;s<q.length;s++){var c={},f=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"name")),g="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"hidden")),l=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"axis")),p=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],
"position")),v=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"summarize")),r=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"order"));c.Name=f;c.Type=QueryViewerElementType.Axis;c.Hidden=g;c.Axis=null!=l&&""!=l&&"null"!=l?qv.util.capitalize(l):null;c.Position=p;c.Order=null!=r&&""!=r&&"null"!=r?qv.util.capitalize(r):null;d==QueryViewerOutputType.Table?(c.Filter=e(q[s],"","include",null,!0),c.Filter.Type=QueryViewerFilterType.ShowSomeValues):(c.Subtotals=
"no"==v?QueryViewerSubtotals.No:QueryViewerSubtotals.Yes,c.Filter=e(q[s],"filterType","include",QueryViewerFilterType.ShowSomeValues,!0),c.ExpandCollapse=e(q[s],"collapseType","includeExpand",QueryViewerExpandCollapseType.ExpandSomeValues,!1));k.push(c)}q=qv.util.dom.getMultipleElementsByTagName(m,"OLAPMeasure");for(s=0;s<q.length;s++)c={},f=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"name")),g="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"hidden")),
p=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(q[s],"position")),c.Name=f,c.Type=QueryViewerElementType.Datum,c.Hidden=g,c.Position=p,k.push(c);return k},GetDataPivot:function(a){return a.oat_element.getDataXML()},GetFilteredDataPivot:function(a){return a.oat_element.getFilteredDataXML()},onOAT_PIVOTDragAndDropEvent:function(a,d){if(a.RealType==QueryViewerOutputType.PivotTable&&(IsQueryObjectPreview()&&window.external.SendText(a.ControlName,d),a.DragAndDrop)){var e=qv.util.dom.xmlDocument(d),
e=qv.util.dom.selectXPathNode(e,"/DATA");a.DragAndDropData.Name=e.getAttribute("name");a.DragAndDropData.Type=QueryViewerElementType.Axis;axis=e.getAttribute("axis");a.DragAndDropData.Axis="rows"==axis?QueryViewerAxisType.Rows:"columns"==axis?QueryViewerAxisType.Columns:QueryViewerAxisType.Pages;a.DragAndDropData.Position=e.getAttribute("position");a.DragAndDrop()}},onItemClickEvent:function(a,d,o){var m,k;if(a.ItemClick&&!o||a.ItemDoubleClick&&o){k=o?k=a.ItemDoubleClickData:a.ItemClickData;var q=
qv.util.dom.xmlDocument(d),s=qv.util.dom.selectXPathNode(q,"/DATA/ITEM"),d=qv.util.dom.selectXPathNode(q,"/DATA/CONTEXT/RELATED"),q=qv.util.dom.selectXPathNode(q,"/DATA/CONTEXT/FILTERS");k.Name=s.getAttribute("name");m=s.getAttribute("location");switch(m){case "rows":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Rows;break;case "columns":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Columns;break;case "pages":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Pages;
break;default:k.Type=QueryViewerElementType.Datum,k.Axis=""}k.Value=null!=s.firstChild?s.firstChild.nodeValue:"";k.Selected="true"==s.getAttribute("selected");s=[];for(m=0;m<a.Metadata.Axes.length;m++)a.Metadata.Axes[m].IsComponent&&s.push(a.Metadata.Axes[m].Name);for(m=0;m<a.Metadata.Data.length;m++)a.Metadata.Data[m].IsComponent&&s.push(a.Metadata.Data[m].Name);k.Context=e(d,s);k.Filters=e(q,s);o?a.ItemDoubleClick():a.ItemClick()}},onItemExpandCollapseEvent:function(a,d,e){var m;IsQueryObjectPreview()&&
window.external.SendText(a.ControlName,d);if(a.ItemExpand&&!e||a.ItemCollapse&&e){m=e?m=a.ItemCollapseData:a.ItemExpandData;var d=qv.util.dom.xmlDocument(d),k=qv.util.dom.selectXPathNode(d,"/DATA/ITEM"),d=qv.util.dom.selectXPathNode(d,"/DATA/CONTEXT/EXPANDEDVALUES");m.Name=k.getAttribute("name");m.Value=k.firstChild.nodeValue;m.ExpandedValues=[];for(var k=-1,q=0;q<d.childNodes.length;q++)"VALUE"==d.childNodes[q].nodeName&&(k++,m.ExpandedValues[k]=d.childNodes[q].firstChild.nodeValue);e?a.ItemCollapse():
a.ItemExpand()}},Select:function(a,d){a.oat_element.selectValue(d)},Deselect:function(a){a.oat_element.deselectValue()}}}();var HCChart,_highChartsDrawPointsWrapped,DEFAULTCHARTSPACING=10;
qv.chart=function(){function a(a){return a.RealChartType==QueryViewerChartType.Timeline||a.RealChartType==QueryViewerChartType.SmoothTimeline||a.RealChartType==QueryViewerChartType.StepTimeline}function d(c){return a(c)||c.RealChartType==QueryViewerChartType.Sparkline}function e(a){return a.RealChartType==QueryViewerChartType.Pie||a.RealChartType==QueryViewerChartType.Pie3D||a.RealChartType==QueryViewerChartType.Doughnut||a.RealChartType==QueryViewerChartType.Doughnut3D}function b(a){return a.RealChartType==
QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea}function h(a){return e(a)||a.RealChartType==QueryViewerChartType.Funnel||a.RealChartType==QueryViewerChartType.Pyramid}function o(a){return(a.RealChartType==QueryViewerChartType.ColumnLine||a.RealChartType==QueryViewerChartType.Column3DLine)&&1<a.Chart.Series.DataFields.length}function m(a){return a.RealChartType==QueryViewerChartType.CircularGauge||a.RealChartType==QueryViewerChartType.LinearGauge}
function k(a){return a.RealChartType==QueryViewerChartType.StackedColumn||a.RealChartType==QueryViewerChartType.StackedColumn3D||a.RealChartType==QueryViewerChartType.StackedColumn100||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.StackedLine||a.RealChartType==QueryViewerChartType.StackedLine100?!1:(a.PlotSeries==
QueryViewerPlotSeries.InSeparateCharts||h(a))&&1<a.Chart.Series.DataFields.length}function q(a,c){for(var b=[],d=0;d<a.Charts.length;d++)for(var e=0;e<a.Charts[d].series.length;e++)b.push(a.Charts[d].series[e].data[c]);return b}function s(a,c,b,d,e){for(var f=0;f<a.Charts.length;f++)if(c.id!=a.Charts[f].container.id)for(var g=0;g<a.Charts[f].series.length;g++){var k=a.Charts[f].series[g].data[b];d?(e&&k.setState("hover"),a.Charts[f].tooltip.hide(0)):k.setState()}}function c(a){switch(a){case QueryViewerChartType.Column:case QueryViewerChartType.Column3D:case QueryViewerChartType.StackedColumn:case QueryViewerChartType.StackedColumn3D:case QueryViewerChartType.StackedColumn100:case QueryViewerChartType.PolarArea:return"column";
case QueryViewerChartType.Bar:case QueryViewerChartType.StackedBar:case QueryViewerChartType.StackedBar100:case QueryViewerChartType.LinearGauge:return"bar";case QueryViewerChartType.Area:case QueryViewerChartType.StackedArea:case QueryViewerChartType.StackedArea100:case QueryViewerChartType.FilledRadar:case QueryViewerChartType.StepArea:return"area";case QueryViewerChartType.SmoothArea:return"areaspline";case QueryViewerChartType.Line:case QueryViewerChartType.StackedLine:case QueryViewerChartType.StackedLine100:case QueryViewerChartType.Radar:case QueryViewerChartType.Timeline:case QueryViewerChartType.StepTimeline:case QueryViewerChartType.Sparkline:case QueryViewerChartType.StepLine:return"line";
case QueryViewerChartType.SmoothLine:case QueryViewerChartType.SmoothTimeline:return"spline";case QueryViewerChartType.ColumnLine:case QueryViewerChartType.Column3DLine:return"column";case QueryViewerChartType.Pie:case QueryViewerChartType.Pie3D:case QueryViewerChartType.Doughnut:case QueryViewerChartType.Doughnut3D:return"pie";case QueryViewerChartType.Funnel:return"funnel";case QueryViewerChartType.Pyramid:return"pyramid";case QueryViewerChartType.CircularGauge:return"solidgauge";default:return"line"}}
function f(a,c,b,d,e,f,g){function k(a,c){var b={};b.Name=a.Name;var d=qv.util.GetPictureProperties(a.DataType,a.Picture),d=qv.util.ApplyPicture(c,a.Picture,a.DataType,d);b.Values=[d];return b}a.Name=b;a.Type=d;a.Axis="";a.Value=e;a.Selected=f;a.Context=[];for(b=0;b<c.Metadata.Axes.length;b++)d=c.Metadata.Axes[b],d.IsComponent||(d=k(d,g[d.DataField]),a.Context.push(d));for(b=0;b<c.Metadata.Data.length;b++)d=c.Metadata.Data[b],d.IsComponent||(d=k(d,g[d.DataField]),a.Context.push(d));a.Filters=[]}function g(a,
c){for(var b=!1,d=0;d<a.length;d++)for(var e=a[d],f=0;f<e.series.length;f++){var g=e.series[f].points[c];if(g.selected){g.select();break}else g.select(!0,0<f),b=!0}return b}function l(a){for(var c=0;c<a.length;c++){var b=a[c].getSelectedPoints();0<b.length&&b[0].select(!1,!1)}}function p(a){var c=qv.collection[this.chart.options.qv.viewerId],b=!1;if(c.SelectionAllowed())if("Point"==c.SelectionType){if(a.point.select(),b=a.point.selected,c.PlotSeries==QueryViewerPlotSeries.InSeparateCharts&&b)for(var d=
0;d<c.Charts.length;d++){var e=c.Charts[d].series[0].points[a.point.index];e!=a.point&&e.select(!1)}}else b=g(c.Charts,a.point.index);c.ItemClick&&c.Metadata.Data[a.point.series.index].RaiseItemClick&&(d=c.Chart.Series.ByName[this.name],e=qv.util.formatNumber(a.point.y,d.NumberFormat.DecimalPrecision,d.Picture,!1),f(c.ItemClickData,c,d.FieldName,QueryViewerElementType.Datum,e,b,c.Data.Rows[a.point.index]),c.ItemClick())}function v(a,c){return""==c?qv.util.dom.createSpan(null,"","","",{fontWeight:"bold"},
null,a).outerHTML:qv.util.dom.createSpan(null,"","","",{fontWeight:"bold",color:c},null,a).outerHTML}function r(a,c){var b=Math.min(c.getContainerControl().offsetHeight,c.getContainerControl().offsetWidth)/(k(c)?c.Chart.Series.DataFields.length:1)/13;return qv.util.dom.createSpan(null,"","","",{color:t(c,a),fontSize:b+"px"},null,qv.util.formatNumber(a.point.y,2,"ZZZZZZZZZZZZZZ9.99",!0)+"%").outerHTML}function x(a,c){function b(a){for(var c=a.y,d=a.series.data,a=a.index,e="",e=a,f=a+1;f<d.length&&
d[f].y==c;f++)e=f;e<d.length-1&&e++;for(var g=a,f=a-1;0<=f&&d[f].y==c;f--)g=f;c=(d[e].x-d[g].x)/1E3;return e=" ("+gx.getMessage("GXPL_QViewerDuration")+": "+qv.util.seconsdToText(c)+")"}var d,e=qv.collection[a.points[0].series.chart.options.qv.viewerId];k(e)?d=q(e,a.points[0].point.index):(d=[],jQuery.each(a.points,function(a,c){d.push(c.point)}));for(var f={},g=!1,n=0;n<d.length;n++){var l=d[n].series.name;void 0==f[l]&&(f[l]=[]);f[l].push(d[n]);1<f[l].length&&(g=!0)}var n="",h,Z;for(Z in f){var l=
c[Z],p=f[Z],m=t(e,p[0]);g&&(n+=qv.util.dom.createSpan(null,"","","",{fontWeight:"bold",color:m},null,Z).outerHTML+"<br/>");for(var o=0;void 0!=p[o];o++){var u=p[o],v=parseInt(u.real_x?u.real_x:u.x);if(0<d.length&&d[0].series.chart.options.qv.comparing)n+=u.name+": "+qv.util.formatNumber(u.y,l.NumberFormat.DecimalPrecision,l.Picture,!1)+"<br/>";else{h!=v&&(n+=u.name+"<br/>",h=v);var v=e.RealChartType==QueryViewerChartType.StepTimeline?b(u):"",z=qv.util.dom.createSpan(null,"","","",{color:m},null,Z+
": ").outerHTML,u=qv.util.dom.createSpan(null,"","","",{fontWeight:"bold"},null,qv.util.formatNumber(u.y,l.NumberFormat.DecimalPrecision,l.Picture,!1)).outerHTML,n=n+(z+u+v+"<br/>")}}}return n}function n(a){"undefined"===typeof _avoidSelectionEventHandler&&(_avoidSelectionEventHandler=!1);if(!_avoidSelectionEventHandler){w(X,"none");X=null;if(a.xAxis){var c=a.target.options.qv,b=a.xAxis[0];K(a.target.options.qv.viewerId,100*((b.min-c.dataMin)/(c.dataMax-c.dataMin)),100*((b.max-c.dataMin)/(c.dataMax-
c.dataMin)))}else K(a.target.options.qv.viewerId,0,100);c=qv.collection[a.target.options.qv.viewerId];if(k(c)){var c=c.getContainerControl().id,c=jQuery("[id^="+c+"_chart]"),d=[];jQuery.each(c,function(c,b){if(b.id!=a.target.renderTo.id){var f=jQuery("#"+b.id).highcharts();d.push(f)}});jQuery.each(d,function(c,d){a.xAxis?d.get("xaxis").setExtremes(b.min,b.max):(_avoidSelectionEventHandler=!0,d.zoomOut(),_avoidSelectionEventHandler=!1)})}}}function z(a,c,b,d,f){function e(a,c,b,d,f){function g(a,c){return a==
QueryViewerDataType.Date?10==c.length:" "==c.charAt(10)}function B(a,c,b,d,f){var e=a.substr(0,4),g=a.substr(5,2),a=a.substr(8,2);d||(c=c.replace("M",""));f||(c=c.replace("D",""));for(var G="",k=0;k<c.length;k++)G+=0==k?"":"/",G+=c.charAt(k);c=G.replace("Y",b?e:e.substr(2,2));d&&(c=c.replace("M",g));f&&(c=c.replace("D",a));return c}var G,k;if(""!=a)switch(f=f||(b==QueryViewerDataType.Date?"Days":"Seconds"),f){case "Years":G=a.substr(0,4)+"-01-01";k=B(G,d,g(b,c),!1,!1);break;case "Months":G=a.substr(0,
7)+"-01";k=B(G,d,g(b,c),!0,!1);break;case "Semesters":G="06">=a.substr(5,2)?"01":"07";G=a.substr(0,5)+G+"-01";f="06">=a.substr(5,2)?"01":"02";dateStrSemester=a.substr(0,5)+f+"-01";k=B(dateStrSemester,d,g(b,c),!0,!1);break;case "Quarters":G="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"04":"09">=a.substr(5,2)?"07":"10";G=a.substr(0,5)+G+"-01";f="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"02":"09">=a.substr(5,2)?"03":"04";dateStrQuarter=a.substr(0,5)+f+"-01";k=B(dateStrQuarter,d,g(b,c),!0,!1);break;
case "Weeks":a=new gx.date.gxdate(a,"Y4MD");G=gx.date.dow(a);a=gx.date.dtadd(a,-86400*(G-1));G=qv.util.dateToString(a,!1);k=B(G,d,g(b,c),!0,!0);break;case "Days":G=b==QueryViewerDataType.Date?a:a.substr(0,10);k=b==QueryViewerDataType.Date?c:c.substr(0,10);break;case "Hours":G=a.substr(0,13)+":00:00";k=c.substr(0,13)+":00";break;case "Minutes":G=a.substr(0,16)+":00";k=c.substr(0,16);break;case "Seconds":G=a,k=c}else k=G="";return{dateStr:G,name:k}}var g;g={dateStr:null,name:null};var k=[],n=[],l=[];
for(i=0;i<c.length;i++){var h=a.Values[i].ValueWithPicture,t=a.Values[i].Value,p,m;null!=c[i].Value?d==QueryViewerAggregationType.Count?(p=0,m=parseFloat(qv.util.trim(c[i].Value))):d==QueryViewerAggregationType.Average?(p=parseFloat(qv.util.trim(c[i].Value_N)),m=parseFloat(qv.util.trim(c[i].Value_D))):(p=parseFloat(qv.util.trim(c[i].Value)),m=1):(p=null,m=0);h=e(t,h,b,gx.dateFormat,f);h.dateStr==g.dateStr||0==i?(null!=p&&(k.push(p),n.push(m)),0==i&&(g=h)):(g={x:g.dateStr,y:qv.util.aggregate(d,k,n),
name:g.name},l.push(g),g=h,k=[p],n=[m])}0<k.length&&0<n.length&&(g={x:g.dateStr,y:qv.util.aggregate(d,k,n),name:g.name},l.push(g));return l}function u(c){var b,d,f;a(c)?(c=DEFAULTCHARTSPACING,b=0,d=DEFAULTCHARTSPACING,f=0):f=d=b=c=DEFAULTCHARTSPACING;return[c,b,d,f]}function E(a,c){var b,d;b=3>=a?24:50/(a-1)-1;d=100-(b+1)*(c-1);return{Width:b,Center:d,LowerExtreme:d-b/2,UpperExtreme:d+b/2}}function J(a,c){var b=1/a/2,d=-0.5+(c-0.5)/a;return{Width:b,Center:d,LowerExtreme:d-b/2,UpperExtreme:d+b/2}}
function t(a,c){function b(a){function c(a,b,d){for(var f=0,e=0;e<b.cssRules.length;e++){var g=b.cssRules[e];if(g.selectorText&&0==g.selectorText.indexOf(d)){var G=g.selectorText.replace(d,"");a[G]=g.style.fill;f++}if(f==HIGHCHARTS_MAX_COLORS)break}}if(!a._HighchartsDefaultColors){a._HighchartsDefaultColors=[];var d={},f,e;f=qv.util.GetQueryViewerStyleSheet(a);c(d,f,".highcharts-color-");""!=a.Class&&(f=qv.util.GetThemeStyleSheet(a),e="."+qv.util.GetContainerControlClass(a)+" .highcharts-color-",
c(d,f,e));for(f=0;f<HIGHCHARTS_MAX_COLORS;f++)a._HighchartsDefaultColors.push(d[f.toString()])}return a._HighchartsDefaultColors}var d;d=c.className&&0==c.className.indexOf("highcharts-color-")?parseInt(c.className.replace("highcharts-color-","")):c.colorIndex;d<HIGHCHARTS_MAX_COLORS?d=b(a)[d]:(d=HIGHCHARTS_CUSTOM_COLOR[d-HIGHCHARTS_MAX_COLORS],qv.util.color.IsHexaColor(d)&&(d="#"+d));return d}function D(a,c,b,d){if(!qv.util.IsNullColor(b)){if(b.IsDefault)a=b.ColorIndex;else{var f=b.Color,b=HIGHCHARTS_CUSTOM_COLOR.indexOf(f);
if(0>b){HIGHCHARTS_CUSTOM_COLOR.push(f);var b=HIGHCHARTS_CUSTOM_COLOR.length-1,b=HIGHCHARTS_MAX_COLORS+b,e=qv.util.color.IsHexaColor(f)?"#":"",f="."+HIGHCHARTS_COLOR_PREFIX+b+" {fill: "+e+f+"; stroke: "+e+f+";}",a=qv.util.GetThemeStyleSheet(a);a.insertRule(f,a.cssRules.length)}else b=HIGHCHARTS_MAX_COLORS+b;a=b}d?c.colorIndex=a:c.className=HIGHCHARTS_COLOR_PREFIX+a}}function C(f,g,l){var y=qv.util.XAxisDataType(f)==QueryViewerDataType.Date?"Days":"Seconds",w={qv:{}};w.qv.viewerId=f.userControlId();
w.chart=function(b,d){var f={styledMode:!0};f.spacing=u(b);if(k(b)){var e=b.userControlId(),e=a(b)?Y(e):e;f.renderTo=document.getElementById(e+"_chart"+d.toString())}else f.renderTo=a(b)?document.getElementById(Y(b.userControlId())):b.getContainerControl();o(b)||(f.type=c(b.RealChartType));b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||b.RealChartType==QueryViewerChartType.PolarArea?f.polar=!0:b.RealChartType==QueryViewerChartType.Column3D||b.RealChartType==
QueryViewerChartType.StackedColumn3D||b.RealChartType==QueryViewerChartType.Column3DLine?f.options3d={enabled:!0,alpha:15,beta:15,depth:50,viewDistance:25}:b.RealChartType==QueryViewerChartType.Pie3D||b.RealChartType==QueryViewerChartType.Doughnut3D?f.options3d={enabled:!0,alpha:45,beta:0}:a(b)&&(f.zoomType="x",f.resetZoomButton={theme:{display:"none"}},f.events={},f.events.selection=function(a){n(a)});return f}(f,l);w.credits={enabled:!1};w.legend={enabled:1<f.Chart.Series.DataFields.length&&!k(f)||
h(f),margin:0};w.title=""==f.Title?{text:null}:{text:null==l||0==l?qv.util.getTranslation(f.Title):null};w.subtitle=function(a,c){var b={};if(k(a)&&(h(a)||a.RealChartType==QueryViewerChartType.CircularGauge))b.text=c.Name,b.floating=!0,b.align="left",b.verticalAlign="middle";return b}(f,g);w.pane=function(a,c){var b={};if(a.RealChartType==QueryViewerChartType.CircularGauge){b.background=[];var d;k(a)&&(d=E(1,1));var f=0,e;for(e in a.Chart.Series.ByName){if(!k(a)||f==c){var g=a.Chart.Series.ByName[e],
n={};k(a)||(d=E(a.Chart.Series.DataFields.length,f+1));n.outerRadius=d.UpperExtreme.toString()+"%";n.innerRadius=d.LowerExtreme.toString()+"%";g=qv.util.IsNullColor(g.Color)?g.Points[0].Color:g.Color;D(a,n,g,!1);n.borderWidth=0;b.background.push(n)}f++}}return b}(f,l);w.xAxis=function(a,c){xAxis={};if(a.RealChartType!=QueryViewerChartType.CircularGauge){var f=d(a);if(a.RealChartType!=QueryViewerChartType.Radar&&a.RealChartType!=QueryViewerChartType.FilledRadar&&a.RealChartType!=QueryViewerChartType.PolarArea&&
a.RealChartType!=QueryViewerChartType.LinearGauge&&a.RealChartType!=QueryViewerChartType.Sparkline){var e=xAxis,g="";if(""==a.XAxisTitle)for(var n=0;n<a.Metadata.Axes.length;n++){var l=a.Metadata.Axes[n];if(l.Visible==QueryViewerVisible.Yes||l.Visible==QueryViewerVisible.Always)g+=(""==g?"":", ")+qv.util.getTranslation(l.Title)}else g=qv.util.getTranslationAlsoIfStatic(a.XAxisTitle);e.title={text:g}}else{a.RealChartType==QueryViewerChartType.Sparkline&&k(a)&&(xAxis.title={text:a.Chart.Series.ByIndex[c].Name});
xAxis.lineWidth=0;if(a.RealChartType==QueryViewerChartType.LinearGauge||a.RealChartType==QueryViewerChartType.Sparkline)xAxis.tickPositions=[];xAxis.tickmarkPlacement=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"on":"between"}if(a.RealChartType==QueryViewerChartType.LinearGauge){var e=0,B;k(a)&&(B=J(1,1));xAxis.plotBands=[];for(var h in a.Chart.Series.ByName){if(!k(a)||e==c)g=a.Chart.Series.ByName[h],k(a)||(B=J(a.Chart.Series.DataFields.length,e+
1)),plotBand={},g=qv.util.IsNullColor(g.Color)?g.Points[0].Color:g.Color,D(a,plotBand,g,!1),plotBand.from=B.LowerExtreme,plotBand.to=B.UpperExtreme,xAxis.plotBands.push(plotBand);e++}}f||(xAxis.categories=[]);B=!1;for(e=0;e<a.Chart.Categories.Values.length;e++)""!=a.Chart.Categories.Values[e].ValueWithPicture&&(B=!0),f||(xAxis.categories[e]=a.Chart.Categories.Values[e].ValueWithPicture);if(f)xAxis.type="datetime",xAxis.id="xaxis",xAxis.minRange=1,qv.util.XAxisDataType(a)==QueryViewerDataType.Date&&
(null!=a.Chart.Categories.MaxValue&&null!=a.Chart.Categories.MinValue)&&(f=new gx.date.gxdate(a.Chart.Categories.MinValue,"Y4MD"),864E6>(new gx.date.gxdate(a.Chart.Categories.MaxValue,"Y4MD")).Value.getTime()-f.Value.getTime()&&(xAxis.tickInterval=864E5));else if(xAxis.labels={},xAxis.labels.enabled=B,a.XAxisLabels!=QueryViewerXAxisLabels.Horizontally&&!(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)&&
!b(a))a.XAxisLabels==QueryViewerXAxisLabels.Vertically?(f=90,B=5):(f=parseInt(a.XAxisLabels.replace("Rotated","")),B=10),xAxis.labels.rotation=360-f,xAxis.labels.y=B,xAxis.labels.align="right";b(a)?xAxis.className="highcharts-no-axis-line highcharts-yes-grid-line":a.RealChartType==QueryViewerChartType.Sparkline&&(xAxis.className="highcharts-no-axis-line highcharts-no-grid-line")}return xAxis}(f,l);w.yAxis=function(a,c){function b(a){if(0==a.length)return!1;for(var c,d=0;d<a.length;d++)if(0==d)c=a[d].Picture;
else if(a[d].Picture!=c)return!1;return!0}if(a.RealChartType==QueryViewerChartType.Sparkline)yAxis={visible:!1};else{var d;d=a.RealChartType==QueryViewerChartType.CircularGauge?null:k(a)?c.Name:A(a);o(a)&&!k(a)?(yAxis=[],yAxis[0]={title:{text:d}},yAxis[1]={title:{text:""},opposite:!0}):yAxis={title:{text:d}};yAxis.plotLines=[];yAxis.plotBands=[];if(!e(a)&&!(a.RealChartType==QueryViewerChartType.Funnel||a.RealChartType==QueryViewerChartType.Pyramid)&&!m(a)){for(var f=0;f<a.Chart.PlotBands.length;f++){var g=
a.Chart.PlotBands[f];if(null==c||c.Name==g.SeriesName)g.From==g.To&&null!=g.From?(d={value:g.From,width:1,zIndex:3},D(a,d,g.Color,!1),yAxis.plotLines.push(d)):(d={},D(a,d,g.Color,!1),d.from=!g.From?Number.MIN_VALUE:g.From,d.to=!g.To?Number.MAX_VALUE:g.To,yAxis.plotBands.push(d))}if(k(a)||1==a.Chart.Series.ByIndex.length||b(a.Chart.Series.ByIndex)){var n=k(a)?c:a.Chart.Series.ByIndex[0];yAxis.labels={};yAxis.labels.formatter=function(){return qv.util.formatNumber(this.value,n.NumberFormat.DecimalPrecision,
n.Picture,true)}}}if(a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea)yAxis.min=0,yAxis.gridLineInterpolation=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"polygon":"circle";if(m(a)){yAxis.min=0;yAxis.max=0;for(var B in a.Chart.Series.ByName)if(!k(a)||B==c.Name)d=a.Chart.Series.ByName[B],yAxis.max=Math.max(yAxis.max,100*d.MaximumValue/d.TargetValue);if(a.RealChartType==
QueryViewerChartType.LinearGauge||100!=yAxis.max){d={className:"highcharts-dashed-plot-line",value:100};if(k(a)||1==a.Chart.Series.DataFields.length){var f=k(a)?c:a.Chart.Series.ByIndex[0],l,h;a.RealChartType==QueryViewerChartType.LinearGauge?(g=-10,l=-5,h="right"):(g=15,l=0,h="center");d.label={text:f.TargetValue,verticalAlign:"bottom",rotation:0,y:g,x:l,align:h}}yAxis.plotLines.push(d)}}a.RealChartType==QueryViewerChartType.LinearGauge?(yAxis.className="highcharts-no-axis-line highcharts-no-grid-line",
yAxis.labels={enabled:!1}):a.RealChartType==QueryViewerChartType.CircularGauge&&(yAxis.lineWidth=0,yAxis.tickPositions=[]);if(gx.lang.gxBoolean(a.XAxisIntersectionAtZero)){g=f=!1;for(B in a.Chart.Series.ByName)d=a.Chart.Series.ByName[B],d.PositiveValues&&(f=!0),d.NegativeValues&&(g=!0);g||(o(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0):yAxis.min=0);f||(o(a)&&!k(a)?(yAxis[0].max=0,yAxis[1].max=0):yAxis.max=0)}}return yAxis}(f,g);w.plotOptions=function(c,b){function d(a){var c;c=k(a)||1==a.Chart.Series.DataFields.length?
23*(k(a)?a.Chart.Series.DataFields.length:1):29;return a.getContainerControl().offsetHeight-c}function f(a){var c={radius:1,symbol:"circle",states:{hover:{radius:4}}};a.SelectionAllowed()&&(c.states.select={radius:5,lineWidth:1});return c}var e=gx.lang.gxBoolean(b.ShowValues),g={series:{}};g.series.events={};b.RealChartType==QueryViewerChartType.CircularGauge?(g.series.dataLabels={},g.series.dataLabels.enabled=1==b.Chart.Series.DataFields.length&&gx.lang.gxBoolean(b.ShowValues)||k(b),g.series.dataLabels.y=
0,g.series.dataLabels.borderWidth=0,g.series.dataLabels.formatter=function(){return r(this,b)},g.series.marker={enabled:!1}):e&&(g.series.dataLabels={},g.series.dataLabels.enabled=!0,g.series.dataLabels.connectorColor="#000000",g.series.dataLabels.formatter=function(){var a=b.Chart.Series.ByName[this.series.name];return qv.util.formatNumber(this.point.y*(b.RealChartType==QueryViewerChartType.LinearGauge?a.TargetValue/100:1),a.NumberFormat.DecimalPrecision,a.Picture,!1)},b.RealChartType==QueryViewerChartType.LinearGauge&&
(g.series.dataLabels.inside=!0));if(k(b)&&b.RealChartType!=QueryViewerChartType.CircularGauge){g.series.point={};g.series.point.events={};var n=b.RealChartType!=QueryViewerChartType.LinearGauge;g.series.point.events.mouseOver=function(){s(b,this.series.chart.container,this.index,true,n)};g.series.point.events.mouseOut=function(){s(b,this.series.chart.container,this.index,false,n)}}if(b.ItemClick||b.SelectionAllowed())g.series.events.click=p;switch(c){case "bar":g.bar={};b.RealChartType==QueryViewerChartType.StackedBar?
(g.series.stacking="normal",g.bar.stacking="normal"):b.RealChartType==QueryViewerChartType.StackedBar100&&(g.series.stacking="percent",g.bar.stacking="percent");if(b.RealChartType==QueryViewerChartType.LinearGauge){e=J(b.Chart.Series.DataFields.length,1).Width*d(b);g.bar.pointWidth=e;g.bar.pointPadding=0;g.bar.groupPadding=0;for(var B=Number.MAX_VALUE,l=0;l<b.Chart.Series.DataFields.length;l++){var h=b.Chart.Series.ByIndex[l],h=h.Points[0].Value/h.TargetValue;h<B&&(B=h)}B*=b.getContainerControl().offsetWidth;
g.bar.borderRadius=Math.min(e/2,B/2)}break;case "column":g.column={};b.RealChartType==QueryViewerChartType.StackedColumn||b.RealChartType==QueryViewerChartType.StackedColumn3D||b.RealChartType==QueryViewerChartType.PolarArea?(g.series.stacking="normal",g.column.stacking="normal"):b.RealChartType==QueryViewerChartType.StackedColumn100&&(g.series.stacking="percent",g.column.stacking="percent");b.RealChartType==QueryViewerChartType.PolarArea&&(g.column.pointPadding=0,g.column.groupPadding=0);break;case "area":g.area=
{};b.RealChartType==QueryViewerChartType.StepArea&&(g.area.step="center");g.area.marker=f(b);b.RealChartType==QueryViewerChartType.StackedArea?g.area.stacking="normal":b.RealChartType==QueryViewerChartType.StackedArea100&&(g.area.stacking="percent");break;case "areaspline":g.areaspline={};g.areaspline.marker=f(b);break;case "line":g.line={};g.line.marker=f(b);b.RealChartType==QueryViewerChartType.StepLine?g.line.step="center":b.RealChartType==QueryViewerChartType.StepTimeline&&(g.line.step="left");
a(b)?g.series.connectNulls=!0:b.RealChartType==QueryViewerChartType.StackedLine?g.line.stacking="normal":b.RealChartType==QueryViewerChartType.StackedLine100&&(g.line.stacking="percent");break;case "spline":g.spline={};g.spline.marker=f(b);break;case "pie":g.pie={};if(b.RealChartType==QueryViewerChartType.Doughnut||b.RealChartType==QueryViewerChartType.Doughnut3D)g.pie.innerSize="35%";if(b.RealChartType==QueryViewerChartType.Pie3D||b.RealChartType==QueryViewerChartType.Doughnut3D)g.pie.depth=35;g.pie.dataLabels=
{enabled:e};g.pie.showInLegend=!0;break;case "solidgauge":g.solidgauge={};g.solidgauge.showInLegend=!0;g.solidgauge.rounded=!0;break;case "funnel":g.funnel={};g.funnel.showInLegend=!0;g.funnel.dataLabels={enabled:e};break;case "pyramid":g.pyramid={},g.pyramid.showInLegend=!0,g.pyramid.dataLabels={enabled:e}}return g}(w.chart.type,f);w.tooltip=function(c){var b={};a(c)?(b.borderRadius=1,b.shadow=!0,b.shared=!0,b.useHTML=!1,b.formatter=function(){return x(this,c.Chart.Series.ByName)}):c.RealChartType==
QueryViewerChartType.StackedColumn100||c.RealChartType==QueryViewerChartType.StackedBar100||c.RealChartType==QueryViewerChartType.StackedArea100||c.RealChartType==QueryViewerChartType.StackedLine100?b.formatter=function(){return"<b>"+(""!=this.point.id?this.point.id:this.series.name)+"</b>: "+Math.round(100*this.point.percentage)/100+"%"}:e(c)?b.formatter=function(){var a;if(k(c)){a=qv.collection[this.point.series.chart.options.qv.viewerId];var b=h(a),d=q(a,this.point.index),f=0<d.length?d[0].id:
"",e=""!=f,g="";e&&(g+=v(f,b?t(a,this):""));for(f=0;f<d.length;f++)var n=d[f],g=g+((e||0<f?"<br/>":"")+v(n.series.name+": ",b?"":t(a,n.series))),n=Math.round(100*n.percentage)/100,g=g+(n+"%");a=g}else n=Math.round(100*this.point.percentage)/100,a="<b>"+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>: "+n+"%";return a}:c.RealChartType==QueryViewerChartType.CircularGauge?(b.enabled=(1<c.Chart.Series.DataFields.length||!gx.lang.gxBoolean(c.ShowValues))&&!k(c),b.formatter=function(){return r(this,
c)},b.positioner=function(a){return{x:(this.chart.plotWidth-a)/2,y:this.chart.plotHeight/2}}):b.formatter=function(){var a;var b=c.Chart.Series.ByName;if(!k(c)||m(c)){a=qv.collection[this.series.chart.options.qv.viewerId];var d=b[this.series.name],b=m(a)?"ZZZZZZZZZZZZZZ9.99":d.Picture,f=m(a)?2:d.NumberFormat.DecimalPrecision,d=m(a);a="<b>"+(""!=this.point.id?this.point.id:this.series.name)+"</b>: "+qv.util.formatNumber(this.point.y,f,b,d)+(m(a)?"%":"")}else{this.points?(a=this.points[0],d=a.point.index):
(a=this.point,d=a.index);a=qv.collection[a.series.chart.options.qv.viewerId];var f=h(a),e=q(a,d),d=!this.key?!this.x?"":this.x:this.key,g=""!=d&&a.RealChartType!=QueryViewerChartType.Sparkline,n="";g&&(n+=v(d,f?t(a,this):""));for(var B=0;B<e.length;B++)var l=e[B],d=b[l.series.name],n=n+((g||0<B?"<br/>":"")+v(l.series.name+": ",f?"":t(a,l))),n=n+qv.util.formatNumber(l.y,d.NumberFormat.DecimalPrecision,d.Picture,!1);a=n}return a};return b}(f);w.series=function(c,b,f){function e(c,b,f,g,n){g={};c.ItemClick&&
c.Metadata.Data[f].RaiseItemClick&&(g.className="highcharts-drilldown-point");g.visible=b.Visible==QueryViewerVisible.Yes||b.Visible==QueryViewerVisible.Always;g.events={legendItemClick:function(a){if(b.Visible==QueryViewerVisible.Always)a.preventDefault();else{var d=qv.chart.GetRuntimeMetadata(c),a=qv.util.GetElementInCollection(d,"Name",c.Chart.Series.ByIndex[a.target.index].FieldName);a.Hidden=!a.Hidden;qv.util.autorefresh.UpdateLayoutSameGroup(c,d,false)}}};if(a(c)){g.name=b.Name;g.data=[];g.turboThreshold=
0;qv.util.IsNullColor(b.Color)||D(c,g,b.Color,!0);var B=z(c.Chart.Categories,b.Points,qv.util.XAxisDataType(c),b.Aggregation,n);for(j=0;j<B.length;j++){var f=B[j].name,l=B[j].x,n=B[j].y,l=new gx.date.gxdate(l,"Y4MD");g.data[j]={x:l.Value.getTime()-6E4*l.Value.getTimezoneOffset(),y:n,name:f};qv.util.IsNullColor(b.Color)&&D(c,g.data[j],b.Points[j].Color,!0)}}else{c.RealChartType==QueryViewerChartType.CircularGauge&&(B=k(c)?E(1,1):E(c.Chart.Series.DataFields.length,f+1));g.name=b.Name;g.data=[];g.turboThreshold=
0;qv.util.IsNullColor(b.Color)||D(c,g,b.Color,!0);if(c.RealChartType==QueryViewerChartType.Radar||c.RealChartType==QueryViewerChartType.FilledRadar||c.RealChartType==QueryViewerChartType.PolarArea)g.pointPlacement=c.RealChartType==QueryViewerChartType.Radar||c.RealChartType==QueryViewerChartType.FilledRadar?"on":null;for(j=0;j<b.Points.length;j++)(n=null!=b.Points[j].Value?parseFloat(qv.util.trim(b.Points[j].Value).replace(",",".")):null,m(c)&&(n=100*(n/b.TargetValue)),f=c.Chart.Categories.Values[j].ValueWithPicture,
g.data[j]={},g.data[j].y=n,g.data[j].name=m(c)?"":f,g.data[j].id=g.data[j].name,d(c)&&(l=c.Chart.Categories.Values[j].Value,l=new gx.date.gxdate(l,"Y4MD"),g.data[j].x=l.Value.getTime()-6E4*l.Value.getTimezoneOffset(),g.data[j].id=l),c.RealChartType==QueryViewerChartType.CircularGauge&&(g.data[j].radius=B.UpperExtreme.toString()+"%",g.data[j].innerRadius=B.LowerExtreme.toString()+"%"),c.RealChartType==QueryViewerChartType.CircularGauge)?(f=qv.util.IsNullColor(b.Color)?b.Points[0].Color:b.Color,D(c,
g.data[j],f,!0)):qv.util.IsNullColor(b.Color)&&D(c,g.data[j],b.Points[j].Color,!0)}return g}var g=[],n=0,B;for(B in c.Chart.Series.ByName){if(!k(c)||n==b){var l=e(c,c.Chart.Series.ByName[B],n,g,f),h=null!=b?b:n;o(c)&&(0==h%2?(l.type="column",l.yAxis=0):(l.type="line",l.yAxis=k(c)?0:1));g.push(l)}n++}return g}(f,l,y);return w}function A(a){var c="";if(""==a.YAxisTitle){if(1==a.Chart.Series.DataFields.length){var b;a:for(c=0;c<a.Metadata.Data.length;c++)if(a.Metadata.Data[c].DataField==a.Chart.Series.DataFields[0]){b=
a.Metadata.Data[c];break a}c=qv.util.getTranslation(b.Title)}}else c=qv.util.getTranslationAlsoIfStatic(a.YAxisTitle);return c}function y(a){return!isNaN(parseFloat(a))&&isFinite(a)?gx.dom.el(V+"_Zoom_"+a+"m"):gx.dom.el(a)}function w(a,c){if(zoom=y(a))zoom.style.textDecoration=c}function L(a){if(zoom=y(a))zoom.onclick();else if(0!=a){var c;switch(a){case 12:c=6;break;case 6:c=3;break;case 3:c=2;break;case 2:c=1;break;case 1:c=0}L(c)}}function F(a,c){gx.dom.el(a+"_options_compare_enable").disabled=
!c;gx.dom.el(a+"_options_compare_text").disabled=!c;gx.dom.el(a+"_options_compare_text").style.opacity=!c?0.5:1;gx.dom.el(a+"_options_compare_options").disabled=!c;gx.dom.el(a+"_options_compare_options").style.opacity=!c?0.5:1}function H(a){return a+"_options"}function Y(a){return a+"_center"}function T(a){return a+"_footer_slider"}function da(a){return a+"_footer_chart"}function W(a){return a+"_footer_range"}function U(a){return a+"_footer_left_cursor"}function P(a){return a+"_footer_right_cursor"}
function Q(a){return a+"_footer_center"}function K(a,c,b){var d=Math.max(c,0),c=Math.min(d,100),d=Math.max(b,0),b=Math.min(d,100);jQuery("#"+(a+"_footer")).css("width","100%").css("height",R.toString()+"px");jQuery("#"+da(a)).css("width","100%").css("height",(R-2).toString()+"px");d=qv.collection[a].getContainerControl().offsetWidth;c=c*d/100;b=(100-b)*d/100;if(d-c-b<2*S){var f=2*S-(d-c-b),g;g=0==f%2?f/2:(f+1)/2;c-=g;b-=f-g;0>c&&(b+=c,c=0);0>b&&(c+=b,b=0)}jQuery("#"+T(a)).css("width","100%").css("height",
R.toString()+"px").css("padding-left",(100*c/d).toString()+"%").css("padding-right",(100*b/d).toString()+"%");jQuery("#"+W(a)).css("width","100%").css("height",R.toString()+"px");jQuery("#"+U(a)).css("width",S.toString()+"px").css("height",R.toString()+"px");jQuery("#"+P(a)).css("width",S.toString()+"px").css("height",R.toString()+"px");jQuery("#"+Q(a)).css("width","calc(100% - "+2*S+"px)").css("height",R.toString()+"px").css("left",S.toString()+"px")}function I(a,c){var b=parseInt(jQuery("#"+T(a)).css("padding-left")),
d=parseInt(jQuery("#"+W(a)).css("width")),f;f=c.originalEvent.touches?c.originalEvent.touches[0].pageX-c.originalEvent.touches[0].target.offsetLeft:c.offsetX;switch(c.target.id){case T(a):return f;case U(a):return f+b;case Q(a):return f+b;case P(a):return f+b+d-S}}function ia(c){function b(a){a.preventDefault();M=c;var d=jQuery("#"+T(M)),f=jQuery("#"+W(M));parseInt(d.css("padding-left"));ha=I(M,a);ba=parseInt(d.css("padding-left"));ea=parseInt(d.css("padding-right"));ca=parseInt(d.css("width"));fa=
parseInt(f.css("width"))}function d(){if($||N||O){var c=jQuery("#"+T(M)),b=qv.collection[M],f=gx.dom.el(M+"_options_compare_enable").checked,g=b.getContainerControl().offsetWidth,e;e=a(b)?Y(b.userControlId()):b.getContainerControl().id;var b=k(b)?jQuery("[id^="+e+"_chart]"):jQuery("#"+e),n=[];jQuery.each(b,function(a,c){var b=jQuery("#"+c.id).highcharts();n.push(b)});b=n[0];e=parseInt(c.css("padding-left"));var l=parseInt(c.css("padding-right")),c=100*e/g,g=100*(1-l/g);if(0==c&&100==g)jQuery.each(n,
function(a,c){c.zoomOut()});else{b.get("xaxis").getExtremes();var b=b.options.qv,h=b.dataMin+c/100*(b.dataMax-b.dataMin),B=b.dataMin+g/100*(b.dataMax-b.dataMin),p=f?!1:!0;jQuery.each(n,function(a,c){c.get("xaxis").setExtremes(h,B,p)})}f&&aa(n);if(N||O)w(X,"none"),X=null}N=O=$=!1}function f(a){if($||N||O)if(a=I(M,a)-ha,a=O?Math.min(a,fa-2*S):Math.min(a,ea),a=N?Math.max(a,-fa+2*S):Math.max(a,-ba),0!=a){jQuery("#"+Q(M));var c=jQuery("#"+T(M));jQuery("#"+W(M));O?c.css("padding-left",(100*(ba+a)/ca).toString()+
"%"):(N||c.css("padding-left",(100*(ba+a)/ca).toString()+"%"),c.css("padding-right",(100*(ea-a)/ca).toString()+"%"))}}var g=jQuery("#"+U(c)),e=jQuery("#"+P(c)),n=jQuery("#"+Q(c)),l=jQuery("#"+T(c));jQuery("#"+W(c));g.mousedown(function(a){a.preventDefault();O=!0});e.mousedown(function(a){a.preventDefault();N=!0});n.mousedown(function(a){a.preventDefault();!O&&!N&&($=!0)});l.mousedown(function(a){b(a)});jQuery(document).mouseup(function(a){d(a)});l.mousemove(function(a){f(a)});g.on("touchstart",function(a){a.preventDefault();
O=!0});e.on("touchstart",function(a){a.preventDefault();N=!0});n.on("touchstart",function(a){a.preventDefault();!O&&!N&&($=!0)});l.on("touchstart",function(a){b(a)});jQuery(document).on("touchend",function(a){d(a)});jQuery(document).on("touchcancel",function(a){d(a)});l.on("touchmove",function(a){f(a)})}function ja(a,c){var b=qv.util.dom.createDiv(a,T(c),"gx-qv-footer-slider","",{},""),b=qv.util.dom.createDiv(b,W(c),"gx-qv-footer-range","",{},"");qv.util.dom.createDiv(b,U(c),"gx-qv-footer-left-cursor",
"",{},"");qv.util.dom.createDiv(b,P(c),"gx-qv-footer-right-cursor","",{},"");qv.util.dom.createDiv(b,Q(c),"gx-qv-footer-center","",{},"");qv.util.dom.createDiv(a,da(c),"gx-qv-footer-chart","",{},"")}function ka(a,c){var b=da(a.userControlId()),d=a.RealChartType==QueryViewerChartType.SmoothTimeline?"spline":"line",f=a.RealChartType==QueryViewerChartType.StepTimeline?"left":"",g=[];if(k(a))for(e=0;e<c.length;e++)g.push(c[e].series[0]);else for(var e=0;e<c[0].series.length;e++)g.push(c[0].series[e]);
return qv.chart.getSparklineChartOptions(a,b,d,!1,f,g)}function aa(a){var c=a[0],b=c.options.qv.viewerId,d=qv.collection[b],f=gx.dom.el(b+"_options_compare_enable").checked;jQuery.each(a,function(a,c){c.options.qv.comparing=f});var g=c.get("xaxis").getExtremes();void 0!=g.userMin&&(g.min=g.userMin);void 0!=g.userMax&&(g.max=g.userMax);if(f){var e=gx.dom.el(b+"_options_compare_options").children,n;for(ind=0;void 0!=e[ind]&&void 0==n;ind++)e[ind].selected&&(n=e[ind].value);var l,h;"PrevPeriod"==n?(h=
new Date(g.min),l=new Date(g.min-(g.max-g.min))):"PrevYear"==n&&(l=new Date(g.min),l=new Date(l.setFullYear(l.getFullYear()-1)),h=new Date(g.max),h=new Date(h.setFullYear(h.getFullYear()-1)));l=l.getTime();h=h.getTime();if(zoom=y(b+"_Zoom_0m"))zoom.style.display="none"}else if(zoom=y(b+"_Zoom_0m"))zoom.style.display="";jQuery.each(a,function(a,c){for(var b=[];c.series.length>0;){c.options.qv.colorIndexesUsed||b.push(c.series[0].colorIndex);c.series[0].remove(true)}if(!c.options.qv.colorIndexesUsed)c.options.qv.colorIndexesUsed=
b});var e=0,p;for(p in d.Chart.Series.ByName){var t=d.Chart.Series.ByName[p],m,u;k(d)?(m=a[e],u=m.options.qv.colorIndexesUsed[0]):(m=c,u=m.options.qv.colorIndexesUsed[e]);var o={turboThreshold:0};o.colorIndex=u;o.id=p+"1";o.name=p;o.data=[];if(f){var v={className:"highcharts-dashed-series-line",turboThreshold:0};v.colorIndex=u;v.id=p+"2";v.name=p;v.data=[]}u=document.getElementById(b+"_options_group_options").value;t=z(d.Chart.Categories,t.Points,qv.util.XAxisDataType(d),t.Aggregation,u);for(i=0;i<
t.length;i++){u=t[i].y;var r=new gx.date.gxdate(t[i].x,"Y4MD"),w=t[i].name,E=r.Value.getTime()-6E4*r.Value.getTimezoneOffset(),r=r.Value.getTime()-6E4*r.Value.getTimezoneOffset();if(f){var q=!1,C=!1;E<=g.max&&E>=g.min&&(q=!0);if(E<=h&&E>=l){var C=!0,x=new Date(E),D;"PrevPeriod"==n?D="1m"==m.options.qv.predef_zoom?x.setMonth(x.getMonth()+1):"2m"==m.options.qv.predef_zoom?x.setMonth(x.getMonth()+2):"3m"==m.options.qv.predef_zoom?x.setMonth(x.getMonth()+3):"6m"==m.options.qv.predef_zoom?x.setMonth(x.getMonth()+
6):"12m"==m.options.qv.predef_zoom?x.setFullYear(x.getFullYear()+1):D+(g.max-g.min):"PrevYear"==n&&(D=x.setFullYear(x.getFullYear()+1))}q&&(q={},q.x=E,q.y=u,q.name=w,o.data.push(q));C&&(q={},q.x=D,q.y=u,q.name=w,q.real_x=r,v.data.push(q))}else o.data.push({x:E,y:u,name:w})}m.addSeries(o);f&&m.addSeries(v);e++}}function la(a,c){if(a.length<c)return 0;var b=(a[a.length-1].x-a[a.length-c].x)/1E3/3600/24/(365/12);return 1>=b?1:2>=b?2:3>=b?3:6>=b?6:12}function ma(a,c){function b(a,c,d,f,g,e,n,l,k){var h=
c.userControlId(),a=qv.util.dom.createSelect(a,H(h)+"_group_options");qv.util.XAxisDataType(c)==QueryViewerDataType.DateTime&&(qv.util.dom.createOption(a,"Seconds","Seconds"==c._groupOption,gx.getMessage("GXPL_QViewerSeconds")),k&&(qv.util.dom.createOption(a,"Minutes","Minutes"==c._groupOption,gx.getMessage("GXPL_QViewerMinutes")),l&&qv.util.dom.createOption(a,"Hours","Hours"==c._groupOption,gx.getMessage("GXPL_QViewerHours"))));if(E||qv.util.XAxisDataType(c)==QueryViewerDataType.Date)qv.util.dom.createOption(a,
"Days","Days"==c._groupOption,gx.getMessage("GXPL_QViewerDays")),n&&(qv.util.dom.createOption(a,"Weeks","Weeks"==c._groupOption,gx.getMessage("GXPL_QViewerWeeks")),e&&(qv.util.dom.createOption(a,"Months","Months"==c._groupOption,gx.getMessage("GXPL_QViewerMonths")),g&&(qv.util.dom.createOption(a,"Quarters","Quarters"==c._groupOption,gx.getMessage("GXPL_QViewerQuarters")),f&&(qv.util.dom.createOption(a,"Semesters","Semesters"==c._groupOption,gx.getMessage("GXPL_QViewerSemesters")),d&&qv.util.dom.createOption(a,
"Years","Years"==c._groupOption,gx.getMessage("GXPL_QViewerYears"))))));return a}var d=a[0];V=d.options.qv.viewerId;var f=qv.collection[V],g=document.getElementById(H(V)),e=document.getElementById(V+"_footer"),n=d.get("xaxis").getExtremes(),l=n.dataMax-n.dataMin;jQuery.each(a,function(a,c){c.options.qv.dataMax=n.dataMax;c.options.qv.dataMin=n.dataMin});var k=2628288E3<l,h=5255712E3<l,p=7884E6<l,t=15768E6<l,l=31536E6<l;f._groupOption=f._groupOption||(qv.util.XAxisDataType(f)==QueryViewerDataType.Date?
"Days":"Seconds");var m=new gx.date.gxdate(""),u=new gx.date.gxdate("");m.Value.setTime(n.dataMin+6E4*m.Value.getTimezoneOffset());u.Value.setTime(n.dataMax+6E4*u.Value.getTimezoneOffset());var o=!0,v=!0,z=!0,r=!0,q=!0,E=!0,x=!0,y=!0;gx.date.year(m)==gx.date.year(u)&&(o=!1,6>=gx.date.month(m)&&7<=gx.date.month(u)||(v=!1,3>=gx.date.month(m)&&4<=gx.date.month(u)||(6>=gx.date.month(m)&&7<=gx.date.month(u)||9>=gx.date.month(m)&&10<=gx.date.month(u))||(z=!1,gx.date.month(m)==gx.date.month(u)&&(r=!1,gx.date.day(m)-
gx.date.dow(m)==gx.date.day(u)-gx.date.dow(u)&&(q=!1,gx.date.day(m)==gx.date.day(u)&&(E=!1,gx.date.hour(m)==gx.date.hour(u)&&(x=!1,gx.date.minute(m)==gx.date.minute(u)&&(y=!1))))))));(function(a,c,d,f,g,e,n,l,k,h,p,t,m,u){function B(a){return qv.util.dom.createDiv(a,"","QVTimelineHeaderGroup","",{height:ga+"px",flexGrow:1},"")}function o(a,c,b){return qv.util.dom.createAnchor(a,b,{cursor:"pointer",paddingLeft:"6px"},c)}var v=c.userControlId(),a=qv.util.dom.createDiv(a,"","QVTimelineHeader","",{display:"flex",
flexDirection:"row",flexWrap:"wrap"},""),z=B(a),r=B(a),w=B(a),z=qv.util.dom.createDiv(z,"","","",{"float":"left"},"");qv.util.dom.createText(z,gx.getMessage("GXPL_QViewerJSChartZoom"));if(d){o(z,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneMonth"),v+"_Zoom_1m");if(f){o(z,gx.getMessage("GXPL_QViewerJSChartZoomLevelToTwoMonth"),v+"_Zoom_2m");if(g){o(z,gx.getMessage("GXPL_QViewerJSChartZoomLevelToThreeMonth"),v+"_Zoom_3m");if(e){o(z,gx.getMessage("GXPL_QViewerJSChartZoomLevelToSixMonth"),v+"_Zoom_6m");
n&&o(z,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneYear"),v+"_Zoom_12m")}}}}o(z,gx.getMessage("GXPL_QViewerJSChartZoomLevelToAll"),v+"_Zoom_0m");d=qv.util.dom.createDiv(r,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createSpan(d,H(v)+"_groupby_text","","",{whiteSpace:"nowrap",paddingRight:"6px"},null,gx.getMessage("GXPL_QViewerGroupBy"));b(d,c,l,k,h,p,t,m,u);c=qv.util.dom.createDiv(w,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createInput(c,H(v)+"_compare_enable",
"checkbox",{verticalAlign:"sub"});qv.util.dom.createSpan(c,H(v)+"_compare_text","","",{whiteSpace:"nowrap",paddingRight:"6px",paddingLeft:"6px"},null,gx.getMessage("GXPL_QViewerCompareWith"));v=qv.util.dom.createSelect(c,H(v)+"_compare_options");qv.util.dom.createOption(v,"PrevPeriod",false,gx.getMessage("GXPL_QViewerPreviousPeriod"));qv.util.dom.createOption(v,"PrevYear",false,gx.getMessage("GXPL_QViewerPreviousYear"));return a})(g,f,k,h,p,t,l,o,v,z,r,q,x,y);ja(e,V);ia(V);gx.dom.el(g.id+"_compare_enable").onclick=
function(){aa(a)};gx.dom.el(g.id+"_compare_options").onchange=function(){gx.dom.el(g.id+"_compare_enable").checked&&aa(a)};gx.dom.el(g.id+"_group_options").onchange=function(){aa(a)};var e=function(c){var b=gx.dom.el(g.id+"_compare_enable").checked;if(c>0){var f,e;e=d.get("xaxis").getExtremes().dataMax;f=e-c*2628028800;var n=b?false:true;jQuery.each(a,function(a,c){c.get("xaxis").setExtremes(f,e,n)});var l=d.options.qv;K(d.options.qv.viewerId,(f-l.dataMin)/(l.dataMax-l.dataMin)*100,(e-l.dataMin)/
(l.dataMax-l.dataMin)*100);F(d.options.qv.viewerId,true)}else{jQuery.each(a,function(a,c){c.zoomOut()});F(d.options.qv.viewerId,false)}w(X,"none");w(this.id,"underline");jQuery.each(a,function(a,b){b.options.qv.predef_zoom=c+"m"});X=this.id;b&&aa(a)},k=[0,1,2,3,6,12],D;for(D in k)if(h=k[D],p=gx.dom.el(V+"_Zoom_"+h+"m"))p.onclick=e.closure(p,[h]);D=la(d.series[0].points,20);L(D);f=ka(f,c);new Highcharts.Chart(f)}function na(c){var b=qv.collection[c.options.qv.viewerId];if(!d(b)){var e=b.SelectionAllowed(),
n=!1;if(b.ItemClick)for(var l=0;l<b.Metadata.Axes.length;l++)if(b.Metadata.Axes[l].RaiseItemClick){n=!0;break}(n||e)&&jQuery.each(c.xAxis[0].ticks,function(b,d){d&&d.label&&(n&&d.label.addClass("gx-qv-clickable-element"),d.label.on("click",function(){var l=n,k=qv.collection[c.options.qv.viewerId],h=!1;e&&!a(k)&&(h=g(k.Charts,d.pos));l&&(l=1==k.Chart.Categories.DataFields.length?qv.util.GetAxisByDataField(k,k.Chart.Categories.DataFields[0]).Name:"",f(k.ItemClickData,k,l,QueryViewerElementType.Axis,
d.label.textStr,h,k.Data.Rows[b]),k.ItemClick())}))})}}var X=null,V=null,ga=35,R=50,S=10,ha=0,M="",ba=0,ea=0,fa=0,ca=0,O=!1,N=!1,$=!1;return{tryToRenderChart:function(c){var b="";(new Date).getTime();c.xml=c.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(c,function(c,d){var f=!1;c!=d.xml.recordsetCacheKey&&(d.xml.recordsetCacheKey=c,f=!0);qv.util.anyError(c)?(b=qv.util.getErrorFromText(c),qv.util.renderError(d,b)):(f&&qv.services.parseRecordsetCacheKeyXML(d),qv.services.GetMetadataIfNeeded(d,function(c,
d){var f=false;if(c!=d.xml.metadata){d.xml.metadata=c;f=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{f&&qv.services.parseMetadataXML(d);d.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(d,function(c,d){var f=false;if(c!=d.xml.data){d.xml.data=c;f=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{f&&qv.services.parseDataXML(d);f=qv.util.GetContainerControlClasses(d);
f!=""&&qv.util.SetUserControlClass(d,f);f=qv.util.ProcessDataAndMetadata(d);if(f==""){var g=d.userControlId(),f=qv.util.dom.getEmptyContainer(d);if((a(d)||k(d))&&f.offsetHeight==0)f.style.height="400px";if(a(d)){qv.util.dom.createDiv(f,H(g),"QVTimelineHeaderContainer","",{width:"100%",height:ga+"px"},"");var e=qv.util.dom.createDiv(f,Y(g),"","",{width:"100%",height:"calc(100% - "+ga+"px - "+R+"px)"},"");qv.util.dom.createDiv(f,g+"_footer","gx-qv-footer","",{width:"100%",height:R+"px"},"");f.style.padding=
DEFAULTCHARTSPACING+"px";f=e}if(k(d))for(var e=d.Chart.Series.DataFields.length,n=parseInt(100/e),l=100%e,g=a(d)?Y(g):g,h=0;h<e;h++)qv.util.dom.createDiv(f,g+"_chart"+h.toString(),"","",{width:"100%",height:(n+(h<l?1:0)).toString()+"%"},"");f=[];if(k(d)){var e=0,p;for(p in d.Chart.Series.ByName){n=C(d,d.Chart.Series.ByName[p],e);f.push(n);e++}}else{n=C(d,null,null);f.push(n)}if(d.RealChartType==QueryViewerChartType.CircularGauge){p=qv.util.GetThemeStyleSheet(d);p.insertRule("#"+d.ContainerName+" .highcharts-tooltip-box {fill: none !important; stroke-width: 0 !important; }",
p.cssRules.length)}Highcharts.setOptions({lang:{months:[gx.getMessage("GXPL_QViewerJanuary"),gx.getMessage("GXPL_QViewerFebruary"),gx.getMessage("GXPL_QViewerMarch"),gx.getMessage("GXPL_QViewerApril"),gx.getMessage("GXPL_QViewerMay"),gx.getMessage("GXPL_QViewerJune"),gx.getMessage("GXPL_QViewerJuly"),gx.getMessage("GXPL_QViewerAugust"),gx.getMessage("GXPL_QViewerSeptember"),gx.getMessage("GXPL_QViewerOctober"),gx.getMessage("GXPL_QViewerNovember"),gx.getMessage("GXPL_QViewerDecember")],weekdays:[gx.getMessage("GXPL_QViewerSunday"),
gx.getMessage("GXPL_QViewerMonday"),gx.getMessage("GXPL_QViewerTuesday"),gx.getMessage("GXPL_QViewerWednesday"),gx.getMessage("GXPL_QViewerThursday"),gx.getMessage("GXPL_QViewerFriday"),gx.getMessage("GXPL_QViewerSaturday")],shortMonths:[gx.getMessage("GXPL_QViewerJanuary").substring(0,3),gx.getMessage("GXPL_QViewerFebruary").substring(0,3),gx.getMessage("GXPL_QViewerMarch").substring(0,3),gx.getMessage("GXPL_QViewerApril").substring(0,3),gx.getMessage("GXPL_QViewerMay").substring(0,3),gx.getMessage("GXPL_QViewerJune").substring(0,
3),gx.getMessage("GXPL_QViewerJuly").substring(0,3),gx.getMessage("GXPL_QViewerAugust").substring(0,3),gx.getMessage("GXPL_QViewerSeptember").substring(0,3),gx.getMessage("GXPL_QViewerOctober").substring(0,3),gx.getMessage("GXPL_QViewerNovember").substring(0,3),gx.getMessage("GXPL_QViewerDecember").substring(0,3)],numericSymbols:null}});p=[];for(e=0;e<f.length;e++){HCChart=new Highcharts.Chart(f[e],na);p.push(HCChart)}d.Charts=p;a(d)&&ma(p,f);d._ControlRenderedTo=d.RealType;qv.util.hideActivityIndicator(d)}else qv.util.renderError(d,
f)}}):qv.util.renderError(d,d.Metadata.ParserResult.Message)}}))})},GetMetadataChart:function(a){var c=qv.util.GetDesigntimeMetadata(a);(function(a,c){function b(a,c,d){for(var f=0;f<a.length;f++){var g=a[f];if(g.Name==c){g.Visible=d?QueryViewerVisible.Yes:QueryViewerVisible.No;break}}}if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(var d=0;d<a.Charts[0].series.length;d++){var f=a.Charts[0].series[d],g=a.Chart.Series.ByIndex[d].FieldName;b(c,g,f.visible)}else for(d=0;d<a.Charts.length;d++)f=
a.Charts[d].series[0],g=a.Chart.Series.ByIndex[d].FieldName,b(c,g,f.visible)})(a,c);return c},GetRuntimeMetadata:function(a){for(var c=[],b,d=b=0;d<a.Metadata.Axes.length;d++){var f=a.Metadata.Axes[d];f.Visible!=QueryViewerVisible.Never&&(b+=1);c.push({Name:f.Name,Type:QueryViewerElementType.Axis,Axis:f.Axis,Position:f.Visible!=QueryViewerVisible.Never?b:null,Hidden:f.Visible==QueryViewerVisible.Never||f.Visible==QueryViewerVisible.No})}for(d=b=0;d<a.Metadata.Data.length;d++)f=a.Metadata.Data[d],
f.Visible!=QueryViewerVisible.Never&&(b+=1),c.push({Name:f.Name,Type:QueryViewerElementType.Datum,Axis:"",Position:f.Visible!=QueryViewerVisible.Never?b:null,Hidden:f.Visible==QueryViewerVisible.Never||f.Visible==QueryViewerVisible.No});if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(b=0;b<a.Charts[0].series.length;b++)d=a.Charts[0].series[b],f=a.Chart.Series.ByIndex[b].FieldName,f=qv.util.GetElementInCollection(c,"Name",f),f.Hidden=!d.visible;else for(b=0;b<a.Charts.length;b++)d=a.Charts[b].series[0],
f=a.Chart.Series.ByIndex[b].FieldName,f=qv.util.GetElementInCollection(c,"Name",f),f.Hidden=!d.visible;return c},GetDataChart:function(a){return a.xml.data},getSparklineChartOptions:function(a,c,b,d,f,g){a={chart:{}};a.chart.renderTo=c;a.chart.margin=0;a.chart.type=b;a.chart.styledMode=!0;d&&(a.chart.className="highcharts-no-background");a.title={};a.title.text="";a.credits={};a.credits.enabled=!1;a.xAxis={};a.xAxis.visible=!1;a.yAxis={};a.yAxis.visible=!1;a.legend={};a.legend.enabled=!1;a.tooltip=
{};a.tooltip.enabled=!1;a.plotOptions={};a.plotOptions.series={};a.plotOptions.series.animation=!1;a.plotOptions.series.connectNulls=!0;a.plotOptions.series.enableMouseTracking=!1;a.plotOptions.series.lineWidth=1;a.plotOptions.series.shadow=!1;a.plotOptions.series.states={};a.plotOptions.series.states.hover={};a.plotOptions.series.states.hover.lineWidth=1;a.plotOptions.series.marker={};a.plotOptions.series.marker.radius=0;a.plotOptions.series.marker.states={};a.plotOptions.series.marker.states.hover=
{};a.plotOptions.series.marker.states.hover.radius=2;""!=f&&(a.plotOptions.series.step=f);a.series=[];for(c=0;c<g.length;c++)a.series.push(g[c]);return a},IsDatetimeXAxis:function(a){return d(a)},IsSingleSerieChart:function(a){return h(a)},IsAreaChart:function(a){return a.RealChartType==QueryViewerChartType.Area||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.SmoothArea||a.RealChartType==QueryViewerChartType.StepArea},
IsLineChart:function(c){return c.RealChartType==QueryViewerChartType.Line||c.RealChartType==QueryViewerChartType.StackedLine||c.RealChartType==QueryViewerChartType.StackedLine100||c.RealChartType==QueryViewerChartType.SmoothLine||c.RealChartType==QueryViewerChartType.StepLine||c.RealChartType==QueryViewerChartType.Sparkline||a(c)},IsSplittedChart:function(a){return k(a)},IsGaugeChart:function(a){return m(a)},Select:function(a,c){for(var b=[],d=0;d<a.Data.Rows.length;d++){var f=a.Data.Rows[d],g=!0;
for(j=0;j<c.length;j++){var e=c[j];if(f[e.DataField]&&qv.util.trim(f[e.DataField])!=qv.util.trim(e.Value)){g=!1;break}}g&&b.push(d)}if(0<b.length){d=a.Charts;for(f=0;f<d.length;f++)for(var g=d[f],e=!1,n=0;n<b.length;n++)for(var k=b[n],h=0;h<g.series.length;h++)g.series[h].points[k].select(!0,e),e||(e=!0)}else l(a.Charts)},Deselect:function(a){l(a.Charts)}}}();
qv.card=function(){function a(a,b){for(var d={},e=0;e<a.length;e++){var k=a[e],h;h=k;for(var m=b,o=[],n=[],z=[],u=0;u<m.length;u++){var q=m[u];if(h.IsFormula){var s=0;do{s++;var t=q[h.DataField+"_"+s.toString()];void 0!=t&&(t=parseFloat(t),0==u?z.push(t):z[s-1]+=t)}while(void 0!=t)}else h.Aggregation==QueryViewerAggregationType.Count?(s=0,q=parseFloat(q[h.DataField])):h.Aggregation==QueryViewerAggregationType.Average?(s=parseFloat(q[h.DataField+"_N"]),q=parseFloat(q[h.DataField+"_D"])):(s=parseFloat(q[h.DataField]),
q=1),o.push(s),n.push(q)}h=h.IsFormula?qv.util.evaluate(h.Formula,h.DataField+"_",z):qv.util.aggregate(h.Aggregation,o,n).toString();d[k.DataField]=h}return d}function d(a,b){if(0!=a.ConditionalStyles.length)for(var d=0;d<a.ConditionalStyles.length;d++){var e=a.ConditionalStyles[d];if(qv.util.satisfyStyle(b,e))return qv.util.css.parseStyle(e.StyleOrClass)}return qv.util.css.parseStyle(a.Style)}function e(a,b,d,e){function k(a,c){var b=gx.date.now(),d;switch(a){case QueryViewerTrendPeriod.LastYear:d=
gx.date.addyr(b,-1);break;case QueryViewerTrendPeriod.LastSemester:d=gx.date.addmth(b,-6);break;case QueryViewerTrendPeriod.LastQuarter:d=gx.date.addmth(b,-3);break;case QueryViewerTrendPeriod.LastMonth:d=gx.date.addmth(b,-1);break;case QueryViewerTrendPeriod.LastWeek:d=gx.date.dtadd(b,-604800);break;case QueryViewerTrendPeriod.LastDay:d=gx.date.dtadd(b,-86400);break;case QueryViewerTrendPeriod.LastHour:d=gx.date.dtadd(b,-3600);break;case QueryViewerTrendPeriod.LastMinute:d=gx.date.dtadd(b,-60);break;
case QueryViewerTrendPeriod.LastSecond:d=gx.date.dtadd(b,-1)}return qv.util.dateToString(d,c==QueryViewerDataType.DateTime)}var h={};if(a.IncludeTrend)if(a.TrendPeriod==QueryViewerTrendPeriod.SinceTheBeginning||""==a.TrendPeriod)h=0;else for(var m=k(a.TrendPeriod,e),h=a.Data.Rows.length-1,o=a.Data.Rows.length-2;0<=o&&!(a.Data.Rows[o][d]<m);o--)h=o;else h=a.Data.Rows.length-1;return h=function(a,c,b,d,f,g){var e=null,l=null,k=null,h=null,p=[],m={AnyTrend:!1};if(""!=b){for(var o=f.length-1,v=0,r=0,
q=0,x=0,s=0,U=0,P=null,Q=null;a<=o;a++)if(void 0!=f[a][b]&&void 0!=f[a][d]){var v=v+1,K=new gx.date.gxdate(f[a][b],"Y4MD"),I=parseFloat(f[a][d]);p.push({x:K.Value.getTime()-6E4*K.Value.getTimezoneOffset(),y:I});if(null==e&&null==l)l=e=I,k=f[a][b],h=f[a][b];else if(I>l&&(h=f[a][b],l=I),I<e)k=f[a][b],e=I;a>=c&&(null==P&&null==Q&&(P=K,Q=I),K=g==QueryViewerDataType.Date?gx.date.daysDiff(K,P):gx.date.secDiff(K,P),I-=Q,r+=K,q+=I,x+=K*I,s+=K*K,U+=I*I)}m.AnyTrend=1<v;m.Slope=(v*x-r*q)/(v*s-r*r);m.Intercept=
(q-m.Slope*r)/v;m.R2=Math.pow((v*x-r*q)/Math.sqrt((v*s-r*r)*(v*U-q*q)),2)}c={};c.LinearRegression=m;c.MinValue=e;c.MinWhen=k;c.MaxValue=l;c.MaxWhen=h;c.ChartSeriesData=p;return c}(a.IncludeSparkline||a.IncludeMaxAndMin?0:h,h,d,b.DataField,a.Data.Rows,e)}function b(c,b,d,e){function k(a,c){function b(a,c,d){var f=[];if(d)for(d=0;d<c.length;d++)f.push(c[d][a]);else f.push(c[c.length-1][a]);return f}for(var d=[],f=0;f<a.Metadata.Axes.length;f++){var g=a.Metadata.Axes[f];if(!g.IsComponent){var e={};e.Name=
g.Name;e.Values=b(g.DataField,a.Data.Rows,c);d.push(e)}}for(f=0;f<a.Metadata.Data.length;f++)g=a.Metadata.Data[f],g.IsComponent||(e={},e.Name=g.Name,e.Values=b(g.DataField,a.Data.Rows,c),d.push(e));return d}for(var h=null,m=0;m<b.Metadata.Data.length;m++)if(b.Metadata.Data[m].Name==d){h=b.Metadata.Data[m];break}null!=h&&(c.Name=h.Name,c.Type=QueryViewerElementType.Datum,c.Axis="",d=e?a(b.Metadata.Data,b.Data.Rows):b.Data.Rows[b.Data.Rows.length-1],c.Value=d[h.DataField],c.Context=k(b,e))}function h(a,
b){return a+"_card_sparkline_"+b}function o(a,b,d){d=h(a.userControlId(),d);return qv.chart.getSparklineChartOptions(a,d,"line",!0,"",[{data:b}])}function m(a,b,d,e){var h={textAlign:"center",paddingTop:"0px",paddingRight:"5px",paddingBottom:"0px",paddingLeft:"5px"},a=qv.util.dom.createTable(a,"",{}),k;k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",h,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-value",d,{},null,b);k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",h,"");
qv.util.dom.createSpan(k,"","qv-card-max-and-min-title",d,{},null,e);return a}function k(a){var a=new gx.date.gxdate(a,"Y4MD"),b=gx.date.now(),a=gx.date.secDiff(b,a);return gx.getMessage("GXPL_QViewerTimeAgo").replace("{0}",qv.util.seconsdToText(a))}function q(a,b,d,e){""!=b?(e=qv.util.formatNumber(parseFloat(b),e,d.Picture,!1),b=qv.util.formatNumber(parseFloat(100*b/d.TargetValue),2,"ZZZZZZZZZZZZZZ9.99",!1)+"%"):b=e="";switch(a.ShowDataAs){case QueryViewerShowDataAs.Values:return e;case QueryViewerShowDataAs.Percentages:return b;
case QueryViewerShowDataAs.ValuesAndPercentages:return e+" ("+b+")";default:return e}}function s(c){function b(a,c,d){var d=0<d.LinearRegression.Slope?"keyboard_arrow_up":0>d.LinearRegression.Slope?"keyboard_arrow_down":"drag_handle",f;f=""==c.TrendPeriod?gx.getMessage("GXPL_QViewerSinceTheBeginningTrend"):gx.getMessage("GXPL_QViewer"+c.TrendPeriod+"Trend");var e={width:"0px",marginLeft:"5px"};c.IncludeSparkline||(e.position="relative",e.top="2px");e.fontSize="36px";return d=qv.util.dom.createIcon(a,
f,e,d)}for(var g=0<c.Data.Rows.length,l=!0,p="",v,r=0;r<c.Metadata.Axes.length;r++){var s=c.Metadata.Axes[r];if(s.DataType==QueryViewerDataType.Date||s.DataType==QueryViewerDataType.DateTime){l=!1;p=s.DataField;v=s.DataType;break}}var n;g&&(n=l?a(c.Metadata.Data,c.Data.Rows):c.Data.Rows[c.Data.Rows.length-1]);var z=qv.util.dom.getEmptyContainer(c);s=c.IsAutoResize()?r="":r="100%";var r=qv.util.dom.createTable(z,qv.util.GetContainerControlClasses(c),{width:r,height:s}),r=qv.util.dom.createRow(r),z=
qv.util.dom.createCell(r,1,"center",{},""),r=c.Orientation==QueryViewerOrientation.Horizontal?"100%":"",s=c.Orientation==QueryViewerOrientation.Vertical?"100%":"",z=qv.util.dom.createTable(z,"",{width:r,height:s,whiteSpace:"nowrap"}),u;c.Orientation==QueryViewerOrientation.Horizontal&&(u=qv.util.dom.createRow(z));s=[];for(r=0;r<c.Metadata.Data.length;r++){var E=c.Metadata.Data[r];if(E.Visible==QueryViewerVisible.Yes||E.Visible==QueryViewerVisible.Always){var J=qv.util.ParseNumericPicture(E.DataType,
E.Picture).DecimalPrecision,t,D,C;g?(t=n[E.DataField],D=q(c,n[E.DataField],E,J),C=k(n[p])):C=D=t="";if((gx.lang.gxBoolean(c.IncludeTrend)||gx.lang.gxBoolean(c.IncludeSparkline)||gx.lang.gxBoolean(c.IncludeMaxAndMin))&&g){var A=e(c,E,p,v);s.push(A)}var y=d(E,t);t={};var w="qv-card-element-value";qv.util.startsWith(y,"{")&&qv.util.endsWith(y,"}")?t=JSON.parse(y):w=y;y=null;c.ItemClick&&E.RaiseItemClick&&(w+=(""==w?"":" ")+"gx-qv-clickable-element",y=function(){qv.card.fireItemClickEvent(event,c,l)});
c.Orientation==QueryViewerOrientation.Vertical&&(u=qv.util.dom.createRow(z));var L=c.Orientation==QueryViewerOrientation.Horizontal?"10px":"",F=c.Orientation==QueryViewerOrientation.Vertical?"10px":"",L=qv.util.dom.createCell(u,1,"center",{paddingRight:L,paddingLeft:L,paddingBottom:F,paddingTop:F},""),L=qv.util.dom.createTable(L,"",{}),F=qv.util.dom.createRow(L),F=qv.util.dom.createCell(F,1,"center",{},""),F=qv.util.dom.createTable(F,"",{}),F=qv.util.dom.createRow(F),H=qv.util.dom.createCell(F,1,
"center",{},"");qv.util.dom.createSpan(H,c.getContainerControl().id+"_"+E.Name,w,""!=p?C:"",t,y,D);var H=qv.util.dom.createCell(F,1,"",{},"");g&&(c.IncludeTrend&&!c.IncludeSparkline&&A.LinearRegression.AnyTrend)&&b(H,c,A);F=qv.util.dom.createRow(L);F=qv.util.dom.createCell(F,1,"center",{},"");span1=qv.util.dom.createSpan(F,"","qv-card-element-title",""!=p?C:"",{},null,E.Title);c.IncludeSparkline&&(""!=p&&g)&&(F=qv.util.dom.createRow(L),F=qv.util.dom.createCell(F,1,"",{},""),F=qv.util.dom.createTable(F,
"",{width:"100%"}),F=qv.util.dom.createRow(F),H=qv.util.dom.createCell(F,1,"",{width:"100%"},""),qv.util.dom.createDiv(H,h(c.userControlId(),r),"","",{height:"50px",width:"100%",minWidth:"100px"},""),H=qv.util.dom.createCell(F,1,"",{width:"0%"},""),g&&(c.IncludeTrend&&A.LinearRegression.AnyTrend)&&b(H,c,A));c.IncludeMaxAndMin&&(""!=p&&g)&&(F=qv.util.dom.createRow(L),F=qv.util.dom.createCell(F,1,"center",{},""),F=qv.util.dom.createTable(F,"",{"margin-top":"10px"}),F=qv.util.dom.createRow(F),H=qv.util.dom.createCell(F,
1,"",{},""),m(H,q(c,A.MinValue,E,J),k(A.MinWhen),gx.getMessage("GXPL_QViewerCardMinimum")),H=qv.util.dom.createCell(F,1,"",{},""),m(H,q(c,A.MaxValue,E,J),k(A.MaxWhen),gx.getMessage("GXPL_QViewerCardMaximum")))}}if(c.IncludeSparkline&&""!=p&&g)for(r=0;r<c.Metadata.Data.length;r++)g=o(c,s[r].ChartSeriesData,r),new Highcharts.Chart(g);c._ControlRenderedTo=c.RealType;qv.util.hideActivityIndicator(c)}return{tryToRenderCard:function(a){var b="";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,
function(a,c){var d=!1;a!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=a,d=!0);qv.util.anyError(a)?(b=qv.util.getErrorFromText(a),qv.util.renderError(c,b)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(a,c){var d=false;if(a!=c.xml.metadata){c.xml.metadata=a;d=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(c,b)}else{d&&qv.services.parseMetadataXML(c);c.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(c,
function(a,c){var d=false;if(a!=c.xml.data){c.xml.data=a;d=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(c,b)}else{d&&qv.services.parseDataXML(c);s(c)}}):qv.util.renderError(c,c.Metadata.ParserResult.Message)}}))})},GetMetadataCard:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataCard:function(a){return a.xml.data},fireItemClickEvent:function(a,d,e){a=a.target.id;a=a.substr(a.lastIndexOf("_")+1);b(d.ItemClickData,d,a,e);d.ItemClick()}}}();
qv.map=function(){function a(a){var b=[];if(0<a.Chart.Categories.DataFields.length&&0<a.Chart.Series.DataFields.length)for(var d=0;d<a.Chart.Categories.Values.length;d++){var e=a.Chart.Categories.Values[d].Value,k=parseFloat(a.Chart.Series.ByIndex[0].Points[d].Value);a.MapLibrary===QueryViewerMapLibrary.ECharts?b.push({name:e,value:k}):b.push([axisvalue,k])}return b}function d(a){for(var a=a.Data.Rows,b=[],d,e=0;e<a.length;e++)d={name:a[e].F1,lat:a[e].F2,lon:a[e].F3,colorValue:a[e].F4},b.push(d);
return b}function e(a){return a.Chart.Series.ByIndex[0].Color.Color?"#"+a.Chart.Series.ByIndex[0].Color.Color:"#0F5B78"}function b(a){var b;if(a.MapType==QueryViewerMapType.Choropleth&&0==a.Chart.colorAxis.dataClasses.length)return b={min:0,maxColor:e(a)};if(a.MapType==QueryViewerMapType.Choropleth&&0!=a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Bubble&&0!=a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Point&&0!=a.Chart.colorAxis.dataClasses.length)return b=
a.Chart.colorAxis;if(a.MapType==QueryViewerMapType.Bubble&&0==a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Point&&0==a.Chart.colorAxis.dataClasses.length)b=[];return b}function h(a){var b;if(a.MapType==QueryViewerMapType.Choropleth)return b={enabled:!0};if(a.MapType==QueryViewerMapType.Bubble)return b=0!=a.Chart.colorAxis.dataClasses.length?{enabled:!0}:{enabled:!1};a.MapType==QueryViewerMapType.Point&&(b=0!=a.Chart.colorAxis.dataClasses.length?{enabled:!0}:{enabled:!1});return b}
function o(c){var b;if(c.MapType==QueryViewerMapType.Choropleth)return b=[{name:qv.util.getTranslation(c.Title),type:"map",borderColor:"gray",colorByPoint:!1,data:a(c),joinBy:["name","hc-key"],dataLabels:{enabled:!0,format:"{point.name}"}}];if(c.MapType==QueryViewerMapType.Bubble)return b=0==c.Chart.colorAxis.dataClasses.length?c.Chart.Series.ByIndex[0].Color.Color?[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(c.Title),type:"mapbubble",joinBy:["name","hc-key"],data:a(c),styledMode:!1,
color:e(c),showInLegend:!0,minSize:4,maxSize:"12%"}]:[{enableMouseTracking:!1},{name:qv.util.getTranslation(c.Title),type:"mapbubble",joinBy:["name","hc-key"],data:a(c),colorIndex:c.Metadata.Data[0].colorIndex,opacity:0.5,showInLegend:!0,minSize:4,maxSize:"12%"}]:[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(c.Title),type:"mapbubble",joinBy:["name","hc-key"],data:a(c),styledMode:!1,showInLegend:!0,minSize:4,maxSize:"12%"}];c.MapType==QueryViewerMapType.Point&&(b=""!=c.Chart.colorAxis?
[{borderColor:"#5B595A",showInLegend:!1},{type:"mapline",showInLegend:!1,enableMouseTracking:!1},{name:qv.util.getTranslation(c.Title),type:"mappoint",colorKey:"colorValue",data:d(c)}]:[{borderColor:"#5B595A",showInLegend:!1},{type:"mapline",showInLegend:!1,enableMouseTracking:!1},{name:qv.util.getTranslation(c.Title),type:"mappoint",color:e(c),data:d(c)}]);return b}function m(a){var b;if(a.MapType==QueryViewerMapType.Choropleth||a.MapType==QueryViewerMapType.Bubble)return b={};a.MapType==QueryViewerMapType.Point&&
(b={headerFormat:"",pointFormat:"<b>{point.name}</b><br>Lat: {point.lat}, Lon: {point.lon}, value:{point.colorValue}"});return b}function k(a){var b=(a._EmbeddedInDashboard?"DashboardViewer/":"")+"QueryViewer/"+(a.MapLibrary===QueryViewerMapLibrary.Highchart?"highcharts/":"Echarts/"),d;d={};if(a.Region==QueryViewerRegion.Country)b=b+"countries/"+a.Country.toLowerCase()+"-all.js",d="countries/"+a.Country.toLowerCase()+"/"+a.Country.toLowerCase()+"-all";else if(a.Region==QueryViewerRegion.Continent){d=
"custom/";b+="continents/";switch(a.Continent){case QueryViewerContinent.SouthAmerica:a="south-america";break;case QueryViewerContinent.NorthAmerica:a="north-america";break;default:a=a.Continent.toLowerCase()}d+=a;b+=a+".js"}else a.MapLibrary==QueryViewerMapLibrary.Highcharts?(d="custom/world-highres",b+="continents/world-highres.js"):(d="world",b+="World/world.js");return d={mapKey:d,mapDir:qv.services.url.getStaticDirectory()+b}}function q(a,b,d){for(var k=[],h=0;h<d.Chart.Categories.Values.length;h++)for(var m=
0;m<b._coordSysMgr._coordinateSystems[0].regions.length;m++)if(b._coordSysMgr._coordinateSystems[0].regions[m].name==d.Chart.Categories.Values[h].Value){0!=d.Chart.colorAxis.dataClasses.length?void 0!=b._coordSysMgr._coordinateSystems[0].regions[m].properties.center?k.push({name:d.Chart.Categories.Values[h].Value,coord:[b._coordSysMgr._coordinateSystems[0].regions[m].properties.center[0],b._coordSysMgr._coordinateSystems[0].regions[m].properties.center[1]],value:a[h].value,itemStyle:{color:"#"+d.Chart.Series.ByIndex[0].Points[h].Color.Color}}):
k.push({name:d.Chart.Categories.Values[h].Value,coord:[b._coordSysMgr._coordinateSystems[0].regions[m].center[0],b._coordSysMgr._coordinateSystems[0].regions[m].center[1]],value:a[h].value,itemStyle:{color:"#"+d.Chart.Series.ByIndex[0].Points[h].Color.Color}}):void 0!=b._coordSysMgr._coordinateSystems[0].regions[m].properties.center?k.push({name:d.Chart.Categories.Values[h].Value,coord:[b._coordSysMgr._coordinateSystems[0].regions[m].properties.center[0],b._coordSysMgr._coordinateSystems[0].regions[m].properties.center[1]],
value:a[h].value,itemStyle:{color:e(d)}}):k.push({name:d.Chart.Categories.Values[h].Value,coord:[b._coordSysMgr._coordinateSystems[0].regions[m].center[0],b._coordSysMgr._coordinateSystems[0].regions[m].center[1]],value:a[h].value,itemStyle:{color:e(d)}});break}return k}function s(b,d){function g(a,b){var c=[],d=function(a){for(var b=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),c=[],d,e=0;e<a.Chart.colorAxis.dataClasses.length;e++)d=a.Chart.colorAxis.dataClasses[e].Operator,
d=d==QueryViewerConditionOperatorSymbol.Interval?qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b)+d+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d==QueryViewerConditionOperatorSymbol.Equal?""+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d==QueryViewerConditionOperatorSymbol.LessThan||
d==QueryViewerConditionOperatorSymbol.LessOrEqual?d+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[e].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b),c.push(d);return c}(a),e=function(a){for(var b=[""],c,d=0;d<a.Chart.colorAxis.dataClasses.length;d++)c=a.Chart.colorAxis.dataClasses[d].color,b.push(c);return b}(a),f=function(a,b,
c){var d=[],e;a.MapType==QueryViewerMapType.Bubble&&(e={name:"serie",type:"map",markPoint:{nameProperty:"iso-code",data:b}});d.push(e);for(b=0;b<a.Chart.colorAxis.dataClasses.length;b++)d.push({name:c[b],type:"map",data:[]});return d}(a,b,d);c.push(d,e,f);return c}function h(a,b){b.TextStyle.fontFamily&&(a.fontFamily=b.TextStyle.fontFamily);b.TextStyle.fontSize&&(a.fontSize=b.TextStyle.fontSize);b.TextStyle.fontStyle&&(a.fontStyle=b.TextStyle.fontStyle);b.TextStyle.fontWeight&&(a.fontWeight=b.TextStyle.fontWeight);
b.TextStyle.color&&(a.color=b.TextStyle.color);b.BoxStyle.backgroundColor&&(a.backgroundColor=b.BoxStyle.backgroundColor);b.BoxStyle.borderColor&&(a.borderColor=b.BoxStyle.borderColor);b.BoxStyle.borderWidth&&(a.padding=3,a.borderWidth=b.BoxStyle.borderWidth)}0==b.offsetHeight&&(b.style.height="400px");var m=echarts.init(b),o=function(a){function b(a,c){if(a.fontFamily&&!c.fontFamily)c.fontFamily=a.fontFamily;if(a.fontSize&&!c.fontSize)c.fontSize=a.fontSize;if(a.fontStyle&&!c.fontStyle)c.fontStyle=
a.fontStyle;if(a.fontWeight&&!c.fontWeight)c.fontWeight=a.fontWeight;if(a.color&&!c.color)c.color=a.color}function c(a,b){if(a.fontFamily)b.fontFamily=a.fontFamily;if(a.fontSize)b.fontSize=parseFloat(a.fontSize);if(a.fontStyle)b.fontStyle=a.fontStyle;if(a.fontWeight)b.fontWeight=a.fontWeight;if(a.color)b.color=a.color}function d(a,b){if(a.backgroundColor)b.backgroundColor=a.backgroundColor;if(a.borderWidth)b.borderWidth=parseFloat(a.borderWidth);if(a.borderColor)b.borderColor=a.borderColor}for(var e=
{fontFamily:"Source Sans Pro"},f={},g={},h={},k={},l={},m={},o={},p="white",q="lightcoral",r=qv.util.GetThemeStyleSheet(a),r=r.rules||r.cssRules,a=qv.util.GetContainerControlClass(a),s=0;s<r.length;s++){var v=r[s].style;r[s].selectorText==="."+a?c(v,e):r[s].selectorText==="."+a+" .gx-qv-selected-element"?q=v.backgroundColor:r[s].selectorText==="."+a+".qv-map"?p=v.backgroundColor:r[s].selectorText==="."+a+" .gx-qv-title"?c(v,f):r[s].selectorText==="."+a+" .gx-qv-legend-box"?d(v,l):r[s].selectorText===
"."+a+" .gx-qv-legend-text"?c(v,k):r[s].selectorText==="."+a+" .gx-qv-series-labels-box"?d(v,h):r[s].selectorText==="."+a+" .gx-qv-series-labels-text"?c(v,g):r[s].selectorText==="."+a+" .gx-qv-tooltip-box"?d(v,o):r[s].selectorText==="."+a+" .gx-qv-tooltip-text"&&c(v,m)}b(e,f);b(e,k);b(e,g);b(e,m);return{TextStyle:e,SelectionColor:q,BackgroundColor:p,Title:{TextStyle:f},Legend:{TextStyle:k,BoxStyle:l},SeriesLabels:{TextStyle:g,BoxStyle:h},Tooltip:{TextStyle:m,BoxStyle:o}}}(d);m.clear();var r={backgroundColor:o.BackgroundColor,
series:function(b,c){var d=e(b),f=gx.lang.gxBoolean(b.ShowValues)&&b.MapType===QueryViewerMapType.Bubble,g={type:"map",map:k(b).mapKey,roam:"scale",nameProperty:"iso-code",data:a(b),selectedMode:b.SelectionAllowed()?"single":false,label:{show:false,formatter:"{c}"},emphasis:{label:{show:false},itemStyle:{areaColor:c.SelectionColor,opacity:0.7}},select:{label:{show:false},itemStyle:{areaColor:c.SelectionColor}}};if(b.MapType===QueryViewerMapType.Choropleth)h(g.label,c.SeriesLabels);else if(b.MapType===
QueryViewerMapType.Bubble){var m=b.getContainerControl(),o=Math.min(m.offsetWidth,m.offsetHeight),p=b.Chart.Series.ByIndex[0].MaxValue,r=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture);if(b.Chart.colorAxis.dataClasses.length===0)g.color=d;g.data=a(b);g.showLegendSymbol=false;g.markPoint={symbol:"circle",symbolSize:function(a){return Math.sqrt(a/p)*o/10},label:{show:f,formatter:function(a){return qv.util.ApplyPicture(a.value,b.Chart.Series.ByIndex[0].Picture,
b.Chart.Series.ByIndex[0].DataType,r)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(d,50),borderWidth:1},emphasis:{label:{show:f},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(d,100),borderWidth:2}}};h(g.markPoint.label,c.SeriesLabels)}return g}(d,o),title:{text:qv.util.getTranslation(d.Title),left:"center",textStyle:o.Title.TextStyle},dataRange:function(a,b){function c(b){return b!=null?b:e(a)}var d,f=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,
a.Chart.Series.ByIndex[0].Picture);if(a.MapType==QueryViewerMapType.Choropleth&&a.Chart.colorAxis.dataClasses.length!=0){d=[];for(var h=0;h<a.Chart.colorAxis.dataClasses.length;h++){var k={},l=g(a,"")[0];a.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.Interval?k={start:a.Chart.colorAxis.dataClasses[h].from,end:a.Chart.colorAxis.dataClasses[h].to,color:c(a.Chart.colorAxis.dataClasses[h].color),label:l[h]}:a.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.Equal||
a.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.NotEqual?k={value:a.Chart.colorAxis.dataClasses[h].from,color:c(a.Chart.colorAxis.dataClasses[h].color),label:l[h]}:a.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.GreaterThan?k={start:a.Chart.colorAxis.dataClasses[h].from,color:c(a.Chart.colorAxis.dataClasses[h].color),label:l[h]}:a.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.GreaterOrEqual?k={start:a.Chart.colorAxis.dataClasses[h].from-
1,color:c(a.Chart.colorAxis.dataClasses[h].color),label:l[h]}:a.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.LessThan?k={end:a.Chart.colorAxis.dataClasses[h].to,color:c(a.Chart.colorAxis.dataClasses[h].color),label:l[h]}:a.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.LessOrEqual&&(k={end:a.Chart.colorAxis.dataClasses[h].to+1,color:c(a.Chart.colorAxis.dataClasses[h].color),label:l[h]});d.push(k)}d={left:"left",orient:"vertical",splitList:d,
textStyle:b.TextStyle}}else if(a.MapType==QueryViewerMapType.Choropleth&&a.Chart.colorAxis.dataClasses.length==0){d=e(a);d={min:0,max:a.Chart.Series.ByIndex[0].MaxValue,calculable:true,orient:"horizontal",left:"center",color:[d,"white"],textStyle:b.TextStyle,formatter:function(b){return qv.util.ApplyPicture(b,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,f)}}}if(a.MapType==QueryViewerMapType.Choropleth){if(b.BoxStyle.backgroundColor)d.backgroundColor=b.BoxStyle.backgroundColor;
if(b.BoxStyle.borderColor)d.borderColor=b.BoxStyle.borderColor;if(b.BoxStyle.borderWidth)d.borderWidth=b.BoxStyle.borderWidth}return d}(d,o.Legend),tooltip:function(a,b){var c=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),d={trigger:"item",textStyle:b.TextStyle,formatter:function(b){for(var d=0;d<m._coordSysMgr._coordinateSystems[0].regions.length;d++)if(m._coordSysMgr._coordinateSystems[0].regions[d].name==b.name)return Number.isNaN(b.value)?m._coordSysMgr._coordinateSystems[0].regions[d].properties.name+
" : 0":m._coordSysMgr._coordinateSystems[0].regions[d].properties.name+" : "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,c)}};if(b.BoxStyle.backgroundColor)d.backgroundColor=b.BoxStyle.backgroundColor;if(b.BoxStyle.borderColor)d.borderColor=b.BoxStyle.borderColor;if(b.BoxStyle.borderWidth)d.borderWidth=b.BoxStyle.borderWidth;return d}(d,o.Tooltip)};m.setOption(r);var s=qv.util.GetPictureProperties(d.Chart.Series.ByIndex[0].DataType,d.Chart.Series.ByIndex[0].Picture),
r=q(a(d),m,d);if(d.MapType==QueryViewerMapType.Bubble){r=q(a(d),m,d);r={color:g(d,r)[1],series:g(d,r)[2],legend:{orient:"vertical",x:"left",y:"bottom",selectedMode:!1,data:g(d,r)[0],textStyle:o.Legend.TextStyle,formatter:function(a){return a}}};if(0!=d.Chart.colorAxis.dataClasses.length&&(o.Legend.BoxStyle.backgroundColor&&(r.legend.backgroundColor=o.Legend.BoxStyle.backgroundColor),o.Legend.BoxStyle.borderColor&&(r.legend.borderColor=o.Legend.BoxStyle.borderColor),o.Legend.BoxStyle.borderWidth))r.legend.borderWidth=
o.Legend.BoxStyle.borderWidth;m.setOption(r)}else d.MapType==QueryViewerMapType.Choropleth&&(d.MapType==QueryViewerMapType.Choropleth&&gx.lang.gxBoolean(d.ShowValues)?(r={series:{color:g(d,r)[1],series:g(d,r)[2],legend:{orient:"vertical",x:"left",y:"bottom",selectedMode:!1,data:g(d,r)[0]},markPoint:{symbol:"circle",symbolSize:function(){return 0},label:{show:!0,color:"black",formatter:function(a){return qv.util.ApplyPicture(a.value,d.Chart.Series.ByIndex[0].Picture,d.Chart.Series.ByIndex[0].DataType,
s)}},data:r}}},h(r.series.markPoint.label,o.SeriesLabels)):r={series:{color:g(d,r)[1],series:g(d,r)[2],legend:{orient:"vertical",x:"left",y:"bottom",selectedMode:!1,data:g(d,r)[0]}}},m.setOption(r));d.Charts=[m];(function(a){var b="try { qv.map.CheckMapSize("+a.me()+") } catch (e) {}";a.IntervalCheckChartSize=setInterval(b,500)})(d)}return{tryToRenderMap:function(a){function d(){var e=qv.util.ProcessDataAndMetadata(a);if(""==e){e=a.getContainerControl();qv.util.hideActivityIndicator(a);if(a.MapLibrary==
QueryViewerMapLibrary.Highcharts){var f=a;Highcharts.mapChart(e,{chart:f.MapType==QueryViewerMapType.Bubble&&f.Chart.Series.ByIndex[0].Color.Color||f.MapType==QueryViewerMapType.Choropleth&&0!=f.Chart.colorAxis.dataClasses.length&&!f.Chart.Series.ByIndex[0].Color.Color||f.MapType==QueryViewerMapType.Bubble&&0!=f.Chart.colorAxis.dataClasses.length&&!f.Chart.Series.ByIndex[0].Color.Color?{map:k(f).mapKey,styledMode:!1}:{map:k(f).mapKey,styledMode:!0},title:{text:qv.util.getTranslation(f.Title)},mapNavigation:{enabled:!0,
buttonOptions:{verticalAlign:"bottom"}},tooltip:m(f),series:o(f),colorAxis:b(f),legend:h(f)})}else s(e,a);a._ControlRenderedTo=a.RealType}else qv.util.renderError(a,e)}var e="";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(a,b){var c=!1;a!=b.xml.recordsetCacheKey&&(b.xml.recordsetCacheKey=a,c=!0);qv.util.anyError(a)?(e=qv.util.getErrorFromText(a),qv.util.renderError(b,e)):(c&&qv.services.parseRecordsetCacheKeyXML(b),qv.services.GetMetadataIfNeeded(b,function(a,
b){var c=false;if(a!=b.xml.metadata){b.xml.metadata=a;c=true}(new Date).getTime();if(qv.util.anyError(a)){e=qv.util.getErrorFromText(a);qv.util.renderError(b,e)}else{c&&qv.services.parseMetadataXML(b);b.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(b,function(a,b){var c=false;if(a!=b.xml.data){b.xml.data=a;c=true}(new Date).getTime();if(qv.util.anyError(a)){e=qv.util.getErrorFromText(a);qv.util.renderError(b,e)}else{c&&qv.services.parseDataXML(b);gx.http.loadScript(k(b).mapDir,d)}}):qv.util.renderError(b,
b.Metadata.ParserResult.Message)}}))})},GetMetadataMap:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataMap:function(a){return a.xml.data},CheckMapSize:function(a){var b=a.getContainerControl();if(b.offsetWidth!=a.Chart._lastWidth||b.offsetHeight!=a.Chart._lastHeight)a.Charts[0].resize({width:b.offsetWidth+"px",height:b.offsetHeight+"px"}),a.Chart._lastWidth=b.offsetWidth,a.Chart._lastHeight=b.offsetHeight},IsAfricanCountry:function(a){return 0<="DZ AO BJ BW BF BI CM CV CF TD KM CD DJ EG GQ ER SZ ET GA GM GH GN GW CI KE LS LR LY MG MW ML MR MU MA MZ NA NE NG CG RW ST SN SC SL SO ZA SS SD TZ TG TN UG EH ZM ZW".split(" ").indexOf(a)},
IsAsianCountry:function(a){return 0<="AF AZ AM BH BD BT BN KH CN CY TL GE IN ID IR IQ IL JP JO KZ KW KG LA LB MY MV MN MM NP KP OM PK PS PH QA RU SA SG KR LK PS SY TW TJ TH TR TM AE UZ VN YE".split(" ").indexOf(a)},IsEuropeanCountry:function(a){return 0<="AL AD AT AZ AM BY BE BA BG HR CY CZ DK EE FO FI FR GE DE GR HU IS IE IT XK LV LI LT LU MT MD MC ME NL MK NO PL PT RO RU SM RS SK SI ES SE CH TR UA GB VA".split(" ").indexOf(a)},IsNorthAmericanCountry:function(a){return 0<="AI AG BB BZ BM VG CA CR CU DM DO SV GL GD GT HT HN JM MX NI PA PR LC KN VC BS US TT".split(" ").indexOf(a)},
IsOceanianCountry:function(a){return 0<="AU CK FJ ID KI MY MH FM NR NC NZ PW PG PH WS SB TK TO TV VU".split(" ").indexOf(a)},IsSouthAmericanCountry:function(a){return 0<="AR BO BR CL CO EC GF GY PY PE SR TT UY VE".split(" ").indexOf(a)}}}();
